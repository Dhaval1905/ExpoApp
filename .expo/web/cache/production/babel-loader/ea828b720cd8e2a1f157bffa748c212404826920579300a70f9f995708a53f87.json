{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=useImageConcreteDimensions;var _react=require(\"react\");function extractHorizontalSpace(_ref){var marginHorizontal=_ref.marginHorizontal,leftMargin=_ref.leftMargin,rightMargin=_ref.rightMargin,margin=_ref.margin;var realLeftMargin=leftMargin||marginHorizontal||margin||0;var realRightMargin=rightMargin||marginHorizontal||margin||0;return realLeftMargin+realRightMargin;}function scaleUp(minDimensions,desiredDimensions){var aspectRatio=desiredDimensions.width/desiredDimensions.height;if(desiredDimensions.width<minDimensions.width){return scaleUp(minDimensions,{width:minDimensions.width,height:minDimensions.width/aspectRatio});}if(desiredDimensions.height<minDimensions.height){return scaleUp(minDimensions,{height:minDimensions.height,width:minDimensions.height*aspectRatio});}return desiredDimensions;}function scaleDown(maxDimensions,desiredDimensions){var aspectRatio=desiredDimensions.width/desiredDimensions.height;if(desiredDimensions.width>maxDimensions.width){return scaleDown(maxDimensions,{width:maxDimensions.width,height:maxDimensions.width/aspectRatio});}if(desiredDimensions.height>maxDimensions.height){return scaleDown(maxDimensions,{height:maxDimensions.height,width:maxDimensions.height*aspectRatio});}return desiredDimensions;}function scale(_ref2,originalBox){var minBox=_ref2.minBox,maxBox=_ref2.maxBox;return scaleDown(maxBox,scaleUp(minBox,originalBox));}function computeConcreteDimensions(params){var computeMaxWidth=params.computeMaxWidth,contentWidth=params.contentWidth,flattenStyles=params.flattenStyles,naturalWidth=params.naturalWidth,naturalHeight=params.naturalHeight,specifiedWidth=params.specifiedWidth,specifiedHeight=params.specifiedHeight;var horizontalSpace=extractHorizontalSpace(flattenStyles);var _flattenStyles$maxWid=flattenStyles.maxWidth,maxWidth=_flattenStyles$maxWid===void 0?Infinity:_flattenStyles$maxWid,_flattenStyles$maxHei=flattenStyles.maxHeight,maxHeight=_flattenStyles$maxHei===void 0?Infinity:_flattenStyles$maxHei,_flattenStyles$minWid=flattenStyles.minWidth,minWidth=_flattenStyles$minWid===void 0?0:_flattenStyles$minWid,_flattenStyles$minHei=flattenStyles.minHeight,minHeight=_flattenStyles$minHei===void 0?0:_flattenStyles$minHei;var imagesMaxWidth=typeof contentWidth==='number'?computeMaxWidth(contentWidth):Infinity;var minBox={width:minWidth,height:minHeight};var maxBox={width:Math.min(imagesMaxWidth,maxWidth,typeof specifiedWidth==='number'?specifiedWidth:Infinity)-horizontalSpace,height:Math.min(typeof specifiedHeight==='number'?specifiedHeight:Infinity,maxHeight)};if(typeof specifiedWidth==='number'&&typeof specifiedHeight==='number'){return scale({minBox:minBox,maxBox:maxBox},{width:specifiedWidth,height:specifiedHeight});}if(naturalWidth!=null&&naturalHeight!=null){return scale({minBox:minBox,maxBox:maxBox},{width:naturalWidth,height:naturalHeight});}return null;}function useImageConcreteDimensions(_ref3){var flatStyle=_ref3.flatStyle,naturalDimensions=_ref3.naturalDimensions,specifiedDimensions=_ref3.specifiedDimensions,computeMaxWidth=_ref3.computeMaxWidth,contentWidth=_ref3.contentWidth;return(0,_react.useMemo)(function(){return computeConcreteDimensions({flattenStyles:flatStyle,computeMaxWidth:computeMaxWidth,contentWidth:contentWidth,naturalWidth:naturalDimensions===null||naturalDimensions===void 0?void 0:naturalDimensions.width,naturalHeight:naturalDimensions===null||naturalDimensions===void 0?void 0:naturalDimensions.height,specifiedWidth:specifiedDimensions.width,specifiedHeight:specifiedDimensions.height});},[computeMaxWidth,contentWidth,flatStyle,naturalDimensions,specifiedDimensions.height,specifiedDimensions.width]);}","map":{"version":3,"names":["_react","require","extractHorizontalSpace","_ref","marginHorizontal","leftMargin","rightMargin","margin","realLeftMargin","realRightMargin","scaleUp","minDimensions","desiredDimensions","aspectRatio","width","height","scaleDown","maxDimensions","scale","_ref2","originalBox","minBox","maxBox","computeConcreteDimensions","params","computeMaxWidth","contentWidth","flattenStyles","naturalWidth","naturalHeight","specifiedWidth","specifiedHeight","horizontalSpace","_flattenStyles$maxWid","maxWidth","Infinity","_flattenStyles$maxHei","maxHeight","_flattenStyles$minWid","minWidth","_flattenStyles$minHei","minHeight","imagesMaxWidth","Math","min","useImageConcreteDimensions","_ref3","flatStyle","naturalDimensions","specifiedDimensions","useMemo"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/node_modules/react-native-render-html/lib/commonjs/elements/useImageConcreteDimensions.ts"],"sourcesContent":["import { useMemo } from 'react';\nimport { ImageStyle } from 'react-native';\nimport { ImageDimensions } from '../shared-types';\nimport {\n  IncompleteImageDimensions,\n  UseIMGElementStateProps\n} from './img-types';\n\nexport type ConcreteDimensionsProps = {\n  flatStyle: ImageStyle;\n  naturalDimensions: ImageDimensions | null;\n  specifiedDimensions: IncompleteImageDimensions;\n} & Pick<UseIMGElementStateProps, 'computeMaxWidth' | 'contentWidth'>;\n\nfunction extractHorizontalSpace({\n  marginHorizontal,\n  leftMargin,\n  rightMargin,\n  margin\n}: any) {\n  const realLeftMargin = leftMargin || marginHorizontal || margin || 0;\n  const realRightMargin = rightMargin || marginHorizontal || margin || 0;\n  return realLeftMargin + realRightMargin;\n}\n\nfunction scaleUp(\n  minDimensions: ImageDimensions,\n  desiredDimensions: ImageDimensions\n): ImageDimensions {\n  const aspectRatio = desiredDimensions.width / desiredDimensions.height;\n  if (desiredDimensions.width < minDimensions.width) {\n    return scaleUp(minDimensions, {\n      width: minDimensions.width,\n      height: minDimensions.width / aspectRatio\n    });\n  }\n  if (desiredDimensions.height < minDimensions.height) {\n    return scaleUp(minDimensions, {\n      height: minDimensions.height,\n      width: minDimensions.height * aspectRatio\n    });\n  }\n  return desiredDimensions;\n}\n\nfunction scaleDown(\n  maxDimensions: ImageDimensions,\n  desiredDimensions: ImageDimensions\n): ImageDimensions {\n  const aspectRatio = desiredDimensions.width / desiredDimensions.height;\n  if (desiredDimensions.width > maxDimensions.width) {\n    return scaleDown(maxDimensions, {\n      width: maxDimensions.width,\n      height: maxDimensions.width / aspectRatio\n    });\n  }\n  if (desiredDimensions.height > maxDimensions.height) {\n    return scaleDown(maxDimensions, {\n      height: maxDimensions.height,\n      width: maxDimensions.height * aspectRatio\n    });\n  }\n  return desiredDimensions;\n}\n\nfunction scale(\n  { minBox, maxBox }: { maxBox: ImageDimensions; minBox: ImageDimensions },\n  originalBox: ImageDimensions\n) {\n  return scaleDown(maxBox, scaleUp(minBox, originalBox));\n}\n\nfunction computeConcreteDimensions(params: any) {\n  const {\n    computeMaxWidth,\n    contentWidth,\n    flattenStyles,\n    naturalWidth,\n    naturalHeight,\n    specifiedWidth,\n    specifiedHeight\n  } = params;\n  const horizontalSpace = extractHorizontalSpace(flattenStyles);\n  const {\n    maxWidth = Infinity,\n    maxHeight = Infinity,\n    minWidth = 0,\n    minHeight = 0\n  } = flattenStyles;\n  const imagesMaxWidth =\n    typeof contentWidth === 'number' ? computeMaxWidth(contentWidth) : Infinity;\n  const minBox = {\n    width: minWidth,\n    height: minHeight\n  };\n  const maxBox = {\n    width:\n      Math.min(\n        imagesMaxWidth,\n        maxWidth,\n        typeof specifiedWidth === 'number' ? specifiedWidth : Infinity\n      ) - horizontalSpace,\n    height: Math.min(\n      typeof specifiedHeight === 'number' ? specifiedHeight : Infinity,\n      maxHeight\n    )\n  };\n  if (\n    typeof specifiedWidth === 'number' &&\n    typeof specifiedHeight === 'number'\n  ) {\n    return scale(\n      { minBox, maxBox },\n      {\n        width: specifiedWidth,\n        height: specifiedHeight\n      }\n    );\n  }\n  if (naturalWidth != null && naturalHeight != null) {\n    return scale(\n      { minBox, maxBox },\n      {\n        width: naturalWidth,\n        height: naturalHeight\n      }\n    );\n  }\n  return null;\n}\n\nexport default function useImageConcreteDimensions<\n  P extends ConcreteDimensionsProps\n>({\n  flatStyle,\n  naturalDimensions,\n  specifiedDimensions,\n  computeMaxWidth,\n  contentWidth\n}: P): P['naturalDimensions'] extends ImageDimensions\n  ? ImageDimensions\n  : ImageDimensions | null {\n  return useMemo(() => {\n    return computeConcreteDimensions({\n      flattenStyles: flatStyle,\n      computeMaxWidth,\n      contentWidth,\n      naturalWidth: naturalDimensions?.width,\n      naturalHeight: naturalDimensions?.height,\n      specifiedWidth: specifiedDimensions.width,\n      specifiedHeight: specifiedDimensions.height\n    }) as any;\n  }, [\n    computeMaxWidth,\n    contentWidth,\n    flatStyle,\n    naturalDimensions,\n    specifiedDimensions.height,\n    specifiedDimensions.width\n  ]);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}