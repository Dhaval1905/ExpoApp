{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.TTextCtor=exports.default=void 0;var _HTMLContentModel=_interopRequireDefault(require(\"../model/HTMLContentModel\"));var _compose=_interopRequireDefault(require(\"ramda/src/compose\"));var _textTransforms=require(\"../flow/text-transforms\");var _TNodeCtor=_interopRequireDefault(require(\"./TNodeCtor\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var collapseWhiteSpaces=(0,_compose.default)(_textTransforms.normalizeWhitespaces,_textTransforms.replaceSegmentBreaks,_textTransforms.normalizeZeroWidthWhitespaces,_textTransforms.removeConsecutiveSegmentBreaks,_textTransforms.removeCollapsibleAroundSegmentBreak);var collapseWhiteSpacesWithEastAsianCharset=(0,_compose.default)(_textTransforms.normalizeWhitespaces,_textTransforms.replaceSegmentBreaks,_textTransforms.removeLineBreaksAroundEastAsianDiscardSet,_textTransforms.normalizeZeroWidthWhitespaces,_textTransforms.removeConsecutiveSegmentBreaks,_textTransforms.removeCollapsibleAroundSegmentBreak);var TTextCtor=function TText(init){this.initialize(init);this.isVoid=this.elementModel?this.elementModel.isVoid:false;};exports.TTextCtor=TTextCtor;TTextCtor.prototype=new _TNodeCtor.default('text','TText',{data:{get:function get(){return this.init.textNode.data;},set:function set(data){this.init.textNode.data=data;}}});TTextCtor.prototype.matchContentModel=function matchContentModel(contentModel){return contentModel===_HTMLContentModel.default.textual||contentModel===_HTMLContentModel.default.mixed;};TTextCtor.prototype.isCollapsibleLeft=function isCollapsibleLeft(){return this.hasWhiteSpaceCollapsingEnabled&&!this.isEmpty()&&this.data[0]===' ';};TTextCtor.prototype.isCollapsibleRight=function isCollapsibleRight(){return this.hasWhiteSpaceCollapsingEnabled&&!this.isEmpty()&&(this.isVoid||this.data[this.data.length-1]===' ');};TTextCtor.prototype.isEmpty=function isEmpty(){return this.tagName===null&&!this.data.length;};TTextCtor.prototype.trimLeft=function trimLeft(){if(this.isCollapsibleLeft()){this.data=this.data.slice(1);}};TTextCtor.prototype.trimRight=function trimRight(){if(this.isCollapsibleRight()){this.data=this.data.substr(0,this.data.length-1);}};TTextCtor.prototype.collapseChildren=function collapseChildren(){if(this.hasWhiteSpaceCollapsingEnabled){if(this.init.context.removeLineBreaksAroundEastAsianDiscardSet){this.data=collapseWhiteSpacesWithEastAsianCharset(this.data);}else{this.data=collapseWhiteSpaces(this.data);}}return null;};var _default=TTextCtor;exports.default=_default;","map":{"version":3,"names":["_HTMLContentModel","_interopRequireDefault","require","_compose","_textTransforms","_TNodeCtor","collapseWhiteSpaces","default","normalizeWhitespaces","replaceSegmentBreaks","normalizeZeroWidthWhitespaces","removeConsecutiveSegmentBreaks","removeCollapsibleAroundSegmentBreak","collapseWhiteSpacesWithEastAsianCharset","removeLineBreaksAroundEastAsianDiscardSet","TTextCtor","TText","init","initialize","isVoid","elementModel","prototype","data","get","textNode","set","matchContentModel","contentModel","textual","mixed","isCollapsibleLeft","hasWhiteSpaceCollapsingEnabled","isEmpty","isCollapsibleRight","length","tagName","trimLeft","slice","trimRight","substr","collapseChildren","context"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/node_modules/react-native-render-html/node_modules/@native-html/transient-render-engine/lib/commonjs/tree/TTextCtor.ts"],"sourcesContent":["import { Text } from '../dom/dom-utils';\nimport HTMLContentModel from '../model/HTMLContentModel';\n\nimport compose from 'ramda/src/compose';\nimport { TNodeInit, TNodeImpl } from './tree-types';\nimport {\n  normalizeWhitespaces,\n  normalizeZeroWidthWhitespaces,\n  removeCollapsibleAroundSegmentBreak,\n  removeConsecutiveSegmentBreaks,\n  removeLineBreaksAroundEastAsianDiscardSet,\n  replaceSegmentBreaks\n} from '../flow/text-transforms';\nimport TNodeCtor, { GenericTNodeCtor, Mutable } from './TNodeCtor';\n\nexport interface TTextInit extends TNodeInit {\n  readonly textNode: Text;\n}\n\nexport interface TTextImpl extends TNodeImpl<TTextInit> {\n  readonly data: string;\n  /**\n   * True when tagName is defined and should be substituted with text when\n   * rendering. E.g. <br> tags.\n   */\n  readonly isVoid: boolean;\n}\n\nconst collapseWhiteSpaces = compose(\n  normalizeWhitespaces,\n  replaceSegmentBreaks,\n  normalizeZeroWidthWhitespaces,\n  removeConsecutiveSegmentBreaks,\n  removeCollapsibleAroundSegmentBreak\n);\n\nconst collapseWhiteSpacesWithEastAsianCharset = compose(\n  normalizeWhitespaces,\n  replaceSegmentBreaks,\n  removeLineBreaksAroundEastAsianDiscardSet,\n  normalizeZeroWidthWhitespaces,\n  removeConsecutiveSegmentBreaks,\n  removeCollapsibleAroundSegmentBreak\n);\n\nconst TTextCtor = function TText(this: Mutable<TTextImpl>, init: TTextInit) {\n  this.initialize(init);\n  this.isVoid = this.elementModel ? this.elementModel.isVoid : false;\n} as Function as GenericTNodeCtor<TTextInit, TTextImpl>;\n\n//@ts-ignore\nTTextCtor.prototype = new TNodeCtor('text', 'TText', {\n  data: {\n    get(this: TTextImpl) {\n      return this.init.textNode.data;\n    },\n    set(this: TTextImpl, data: string) {\n      this.init.textNode.data = data;\n    }\n  }\n});\n\nTTextCtor.prototype.matchContentModel = function matchContentModel(\n  contentModel: HTMLContentModel\n) {\n  return (\n    contentModel === HTMLContentModel.textual ||\n    contentModel === HTMLContentModel.mixed\n  );\n};\n\nTTextCtor.prototype.isCollapsibleLeft = function isCollapsibleLeft(\n  this: TTextImpl\n) {\n  return (\n    this.hasWhiteSpaceCollapsingEnabled &&\n    !this.isEmpty() &&\n    this.data[0] === ' '\n  );\n};\n\nTTextCtor.prototype.isCollapsibleRight = function isCollapsibleRight(\n  this: TTextImpl\n) {\n  return (\n    this.hasWhiteSpaceCollapsingEnabled &&\n    !this.isEmpty() &&\n    (this.isVoid || this.data[this.data.length - 1] === ' ')\n  );\n};\n\nTTextCtor.prototype.isEmpty = function isEmpty(this: TTextImpl) {\n  // Only anonymous text nodes can be considered \"empty\"\n  return this.tagName === null && !this.data.length;\n};\n\nTTextCtor.prototype.trimLeft = function trimLeft(this: Mutable<TTextImpl>) {\n  if (this.isCollapsibleLeft()) {\n    this.data = this.data.slice(1);\n  }\n};\n\nTTextCtor.prototype.trimRight = function trimRight(this: Mutable<TTextImpl>) {\n  if (this.isCollapsibleRight()) {\n    this.data = this.data.substr(0, this.data.length - 1);\n  }\n};\n\nTTextCtor.prototype.collapseChildren = function collapseChildren(\n  this: Mutable<TTextImpl>\n) {\n  if (this.hasWhiteSpaceCollapsingEnabled) {\n    if (this.init.context.removeLineBreaksAroundEastAsianDiscardSet) {\n      this.data = collapseWhiteSpacesWithEastAsianCharset(this.data);\n    } else {\n      this.data = collapseWhiteSpaces(this.data);\n    }\n  }\n  return null;\n};\n\nexport default TTextCtor;\n\nexport { TTextCtor };\n"],"mappings":"+GACA,IAAAA,iBAAA,CAAAC,sBAAA,CAAAC,OAAA,+BAEA,IAAAC,QAAA,CAAAF,sBAAA,CAAAC,OAAA,uBAEA,IAAAE,eAAA,CAAAF,OAAA,4BAQA,IAAAG,UAAA,CAAAJ,sBAAA,CAAAC,OAAA,iB,mFAeA,GAAM,CAAAI,mBAAmB,CAAG,GAAAH,QAAA,CAAAI,OAAA,EAC1BH,eAAA,CAAAI,oBAD0B,CAE1BJ,eAAA,CAAAK,oBAF0B,CAG1BL,eAAA,CAAAM,6BAH0B,CAI1BN,eAAA,CAAAO,8BAJ0B,CAK1BP,eAAA,CAAAQ,mCAL0B,CAA5B,CAQA,GAAM,CAAAC,uCAAuC,CAAG,GAAAV,QAAA,CAAAI,OAAA,EAC9CH,eAAA,CAAAI,oBAD8C,CAE9CJ,eAAA,CAAAK,oBAF8C,CAG9CL,eAAA,CAAAU,yCAH8C,CAI9CV,eAAA,CAAAM,6BAJ8C,CAK9CN,eAAA,CAAAO,8BAL8C,CAM9CP,eAAA,CAAAQ,mCAN8C,CAAhD,CASA,GAAM,CAAAG,SAAS,CAAG,QAAS,CAAAC,KAATA,CAAyCC,IAAzC,CAA0D,CAC1E,KAAKC,UAAL,CAAgBD,IAAhB,EACA,KAAKE,MAAL,CAAc,KAAKC,YAAL,CAAoB,KAAKA,YAAL,CAAkBD,MAAtC,CAA+C,KAA7D,CACD,CAHD,C,4BAMAJ,SAAS,CAACM,SAAV,CAAsB,GAAI,CAAAhB,UAAA,CAAAE,OAAJ,CAAc,MAAd,CAAsB,OAAtB,CAA+B,CACnDe,IAAI,CAAE,CACJC,GAAG,UAAAA,IAAA,CAAkB,CACnB,MAAO,MAAKN,IAAL,CAAUO,QAAV,CAAmBF,IAA1B,CACD,CAHG,CAIJG,GAAG,UAAAA,IAAkBH,IAAlB,CAAgC,CACjC,KAAKL,IAAL,CAAUO,QAAV,CAAmBF,IAAnB,CAA0BA,IAA1B,CACD,CANG,CAD6C,CAA/B,CAAtB,CAWAP,SAAS,CAACM,SAAV,CAAoBK,iBAApB,CAAwC,QAAS,CAAAA,iBAATA,CACtCC,YADsC,CAEtC,CACA,MACE,CAAAA,YAAY,GAAK3B,iBAAA,CAAAO,OAAA,CAAiBqB,OAAlC,EACAD,YAAY,GAAK3B,iBAAA,CAAAO,OAAA,CAAiBsB,KAFpC,CAID,CAPD,CASAd,SAAS,CAACM,SAAV,CAAoBS,iBAApB,CAAwC,QAAS,CAAAA,iBAATA,CAAA,CAEtC,CACA,MACE,MAAKC,8BAAL,EACA,CAAC,KAAKC,OAAL,EADD,EAEA,KAAKV,IAAL,CAAU,CAAV,IAAiB,GAHnB,CAKD,CARD,CAUAP,SAAS,CAACM,SAAV,CAAoBY,kBAApB,CAAyC,QAAS,CAAAA,kBAATA,CAAA,CAEvC,CACA,MACE,MAAKF,8BAAL,EACA,CAAC,KAAKC,OAAL,EADD,GAEC,KAAKb,MAAL,EAAe,KAAKG,IAAL,CAAU,KAAKA,IAAL,CAAUY,MAAV,CAAmB,CAA7B,IAAoC,GAFpD,CADF,CAKD,CARD,CAUAnB,SAAS,CAACM,SAAV,CAAoBW,OAApB,CAA8B,QAAS,CAAAA,OAATA,CAAA,CAAkC,CAE9D,MAAO,MAAKG,OAAL,GAAiB,IAAjB,EAAyB,CAAC,KAAKb,IAAL,CAAUY,MAA3C,CACD,CAHD,CAKAnB,SAAS,CAACM,SAAV,CAAoBe,QAApB,CAA+B,QAAS,CAAAA,QAATA,CAAA,CAA4C,CACzE,GAAI,KAAKN,iBAAL,EAAJ,CAA8B,CAC5B,KAAKR,IAAL,CAAY,KAAKA,IAAL,CAAUe,KAAV,CAAgB,CAAhB,CAAZ,CACD,CACF,CAJD,CAMAtB,SAAS,CAACM,SAAV,CAAoBiB,SAApB,CAAgC,QAAS,CAAAA,SAATA,CAAA,CAA6C,CAC3E,GAAI,KAAKL,kBAAL,EAAJ,CAA+B,CAC7B,KAAKX,IAAL,CAAY,KAAKA,IAAL,CAAUiB,MAAV,CAAiB,CAAjB,CAAoB,KAAKjB,IAAL,CAAUY,MAAV,CAAmB,CAAvC,CAAZ,CACD,CACF,CAJD,CAMAnB,SAAS,CAACM,SAAV,CAAoBmB,gBAApB,CAAuC,QAAS,CAAAA,gBAATA,CAAA,CAErC,CACA,GAAI,KAAKT,8BAAT,CAAyC,CACvC,GAAI,KAAKd,IAAL,CAAUwB,OAAV,CAAkB3B,yCAAtB,CAAiE,CAC/D,KAAKQ,IAAL,CAAYT,uCAAuC,CAAC,KAAKS,IAAN,CAAnD,CACD,CAFD,IAEO,CACL,KAAKA,IAAL,CAAYhB,mBAAmB,CAAC,KAAKgB,IAAN,CAA/B,CACD,CACF,CACD,MAAO,KAAP,CACD,CAXD,C,aAaeP,S"},"metadata":{},"sourceType":"script","externalDependencies":[]}