{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useRef,useState}from'react';import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import{useRoute}from'@react-navigation/native';import{useDispatch,useSelector}from'react-redux';import{Icons}from\"../../assets\";import{CustomButton,CustomHeader,MoveMoneyCard}from\"../../components\";import{navigationStrings}from\"../../constants\";import{Strings}from\"../../constants/Strings\";import{Colors}from\"../../theme\";import styling from\"./styles\";import{resendOTP,showLoader,verifyOtp}from\"../../redux/actions/user\";import{showMessage}from'react-native-flash-message';import{save}from\"../../utils/Storage\";import OTPTextView from'react-native-otp-textinput';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OTPVerifyLogin=function OTPVerifyLogin(_ref){var _route$params,_ref2,_ref3,_userDetails$data,_userDetails$data$per,_userDetails$data$per2;var navigation=_ref.navigation;var route=useRoute();var otpInput=useRef(null);var theme=route==null?void 0:(_route$params=route.params)==null?void 0:_route$params.theme;var styles=styling(theme);var userDetails=useSelector(function(state){var _state$user;return state==null?void 0:(_state$user=state.user)==null?void 0:_state$user.login;});var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),otp=_useState2[0],setOtp=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),otpError=_useState4[0],setOtpError=_useState4[1];var onLogin=function onLogin(){return(_ref2=_ref2||_asyncToGenerator(function*(){if(otpInput.current===\"\"){setOtpError('Please enter otp.');}else{yield dispatch(showLoader(true));var data={otp:otpInput.current};var res=yield verifyOtp(data);yield dispatch(showLoader(false));if((res==null?void 0:res.status)===0){showMessage({message:res==null?void 0:res.message,type:\"danger\"});yield save('otpVerify',false);}else{yield save('otpVerify',true);navigation.navigate(navigationStrings.BOTTOMTABSNAV);}}})).apply(this,arguments);};var onPressResetPassword=function onPressResetPassword(){return(_ref3=_ref3||_asyncToGenerator(function*(){yield dispatch(showLoader(true));var res=yield resendOTP();yield dispatch(showLoader(false));if((res==null?void 0:res.status)===0){showMessage({message:res==null?void 0:res.message,type:\"danger\"});}else{showMessage({message:\"Please check your mail OTP resend successfully!\",type:\"success\"});}})).apply(this,arguments);};return _jsxs(View,{style:styles.screen,children:[_jsx(CustomHeader,{theme:theme,headerTitle:\"Verification Code\",onPressBack:function onPressBack(){return navigation.goBack();}}),_jsxs(ScrollView,{style:styles.scrollView,children:[_jsxs(Text,{style:styles.errorText1,children:[\"Enter verification code sent to \",(userDetails==null?void 0:(_userDetails$data=userDetails.data)==null?void 0:(_userDetails$data$per=_userDetails$data.personDetail)==null?void 0:(_userDetails$data$per2=_userDetails$data$per[0])==null?void 0:_userDetails$data$per2.email)||'']}),_jsx(OTPTextView,{ref:function ref(e){return otpInput=e;},autoFocus:true,inputCount:6,inputCellLength:1,textInputStyle:{backgroundColor:'white',width:55,height:70,borderRadius:8,elevation:2,margin:1,fontSize:20,alignItems:'center',marginTop:30,color:'#000'}}),(otpError==null?void 0:otpError.length)>0&&_jsx(Text,{style:styles.errorText,children:otpError}),_jsx(TouchableOpacity,{onPress:function onPress(){return onPressResetPassword();},children:_jsx(Text,{style:styles.resetPassword,children:\"Resend verification code\"})})]}),_jsx(View,{style:styles.ConfirmParent,children:_jsx(CustomButton,{theme:theme,onBtnPress:function onBtnPress(){return onLogin();},buttonTitle:Strings.confirm,buttonStyle:styles.confirmBtn,buttonTitleStyle:styles.confirmText})})]});};export default OTPVerifyLogin;","map":{"version":3,"names":["React","useRef","useState","ScrollView","Text","TouchableOpacity","View","useRoute","useDispatch","useSelector","Icons","CustomButton","CustomHeader","MoveMoneyCard","navigationStrings","Strings","Colors","styling","resendOTP","showLoader","verifyOtp","showMessage","save","OTPTextView","jsx","_jsx","jsxs","_jsxs","OTPVerifyLogin","_ref","_route$params","_ref2","_ref3","_userDetails$data","_userDetails$data$per","_userDetails$data$per2","navigation","route","otpInput","theme","params","styles","userDetails","state","_state$user","user","login","dispatch","_useState","_useState2","_slicedToArray","otp","setOtp","_useState3","_useState4","otpError","setOtpError","onLogin","_asyncToGenerator","current","data","res","status","message","type","navigate","BOTTOMTABSNAV","apply","arguments","onPressResetPassword","style","screen","children","headerTitle","onPressBack","goBack","scrollView","errorText1","personDetail","email","ref","e","autoFocus","inputCount","inputCellLength","textInputStyle","backgroundColor","width","height","borderRadius","elevation","margin","fontSize","alignItems","marginTop","color","length","errorText","onPress","resetPassword","ConfirmParent","onBtnPress","buttonTitle","confirm","buttonStyle","confirmBtn","buttonTitleStyle","confirmText"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/src/modules/OTPVerifyLogin/index.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { ScrollView, Text, TouchableOpacity, View } from 'react-native';\nimport { useRoute } from '@react-navigation/native';\n// import OtpInputs from 'react-native-otp-inputs';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Icons } from '../../assets';\nimport { CustomButton, CustomHeader, MoveMoneyCard } from '../../components';\nimport { navigationStrings } from '../../constants';\nimport { Strings } from '../../constants/Strings';\nimport { Colors } from '../../theme';\nimport styling from './styles';\nimport { resendOTP, showLoader, verifyOtp } from '../../redux/actions/user';\nimport { showMessage } from 'react-native-flash-message';\nimport { save } from '../../utils/Storage';\n// import OTPInputView from '@twotalltotems/react-native-otp-input'\nimport OTPTextView from 'react-native-otp-textinput';\n\nconst OTPVerifyLogin = ({ navigation }) => {\n    const route = useRoute();\n    let otpInput = useRef(null);\n    const theme = route?.params?.theme;\n    const styles = styling(theme);\n    const userDetails = useSelector(state => state?.user?.login)\n    const dispatch = useDispatch()\n    const [otp, setOtp] = useState('')\n    const [otpError, setOtpError] = useState('')\n    const onLogin = async () => {\n        if (otpInput.current === \"\") {\n            setOtpError('Please enter otp.')\n        } else {\n            await dispatch(showLoader(true))\n            let data = {\n                // otp: otp\n                otp: otpInput.current\n            }\n            let res = await verifyOtp(data)\n            await dispatch(showLoader(false))\n            if (res?.status === 0) {\n                showMessage({\n                    message: res?.message,\n                    type: \"danger\",\n                })\n                await save('otpVerify', false)\n            } else {\n                await save('otpVerify', true)\n                navigation.navigate(navigationStrings.BOTTOMTABSNAV)\n            }\n        }\n    }\n    const onPressResetPassword = async () => {\n        await dispatch(showLoader(true))\n        let res = await resendOTP()\n        await dispatch(showLoader(false))\n        if (res?.status === 0) {\n            showMessage({\n                message: res?.message,\n                type: \"danger\",\n            })\n        } else {\n            showMessage({\n                message: \"Please check your mail OTP resend successfully!\",\n                type: \"success\",\n            })\n        }\n    }\n\n    return (\n        <View style={styles.screen}>\n            <CustomHeader\n                theme={theme}\n                headerTitle={\"Verification Code\"}\n                onPressBack={() => navigation.goBack()}\n            />\n            <ScrollView style={styles.scrollView}>\n                <Text style={styles.errorText1}>\n                    Enter verification code sent to {userDetails?.data?.personDetail?.[0]?.email || ''}\n                </Text>\n\n                {/* <OtpInputs\n                    handleChange={(code) => {\n                        setOtp(code)\n                        setOtpError('')\n                    }}\n\n                    numberOfInputs={6}\n                    autoFocus\n                    inputStyles={{ backgroundColor: 'white', width: 55, height: 70, borderRadius: 8, elevation: 2, margin: 1, fontSize: 20, alignItems: 'center', marginTop: 30, color: '#000' }}\n                    textAlign='center'\n                /> */}\n\n                {/* <otpInput ref={e => (otpInput = e)} > */}\n                <OTPTextView ref={e => (otpInput = e)} autoFocus={true} inputCount={6} inputCellLength={1} textInputStyle={{ backgroundColor: 'white', width: 55, height: 70, borderRadius: 8, elevation: 2, margin: 1, fontSize: 20, alignItems: 'center', marginTop: 30, color: '#000' }} />\n                {otpError?.length > 0 && (\n                    <Text style={styles.errorText}>\n                        {otpError}\n                    </Text>\n                )}\n                <TouchableOpacity onPress={() => onPressResetPassword()}>\n                    <Text style={styles.resetPassword}>{\"Resend verification code\"}</Text>\n                </TouchableOpacity>\n            </ScrollView>\n            <View style={styles.ConfirmParent}>\n                <CustomButton\n                    theme={theme}\n                    onBtnPress={() => onLogin()}\n                    buttonTitle={Strings.confirm}\n                    buttonStyle={styles.confirmBtn}\n                    buttonTitleStyle={styles.confirmText}\n                />\n            </View>\n        </View>\n    );\n\n};\n\nexport default OTPVerifyLogin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}