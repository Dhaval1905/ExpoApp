{"ast":null,"code":"\"use strict\";var _defineProperty=require(\"@babel/runtime/helpers/defineProperty\");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=exports.TDocumentCtor=void 0;var _HTMLElementModel=_interopRequireDefault(require(\"../model/HTMLElementModel\"));var _domUtils=require(\"../dom/dom-utils\");var _TBlockCtor=_interopRequireDefault(require(\"./TBlockCtor\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var defaultContextBase=Object.freeze({baseHref:'about:blank',baseTarget:'_self',charset:'utf-8',title:'',lang:'en',dir:'ltr',links:[],meta:[]});function getDefaultDocumentContext(){return Object.assign({},defaultContextBase,{links:[],meta:[]});}function extractContextFromHead(head,lang,dir){var context=getDefaultDocumentContext();if(lang){context.lang=lang;}if(dir){context.dir='rtl';}var domNode=head.domNode;var children=domNode.children;children.filter(_domUtils.isDomElement).forEach(function(child){if(child.tagName==='meta'){if(child.attribs.name){context.meta.push(child.attribs);}else if(child.attribs.charset){context.charset=child.attribs.charset.toLowerCase();}}else if(child.tagName==='link'){context.links.push(child.attribs);}else if(child.tagName==='title'){for(var titleChild of child.children.filter(_domUtils.isDomText)){context.title=titleChild.data.trim();break;}}else if(child.tagName==='base'){context.baseHref=child.attribs.href||context.baseHref;context.baseTarget=child.attribs.target||context.baseTarget;}});return context;}var htmlModel=_HTMLElementModel.default.fromNativeModel({tagName:'html',category:'grouping'});var TDocumentCtor=function TDocument(init){this.initialize(init);};exports.TDocumentCtor=TDocumentCtor;TDocumentCtor.prototype=Object.create(_TBlockCtor.default.prototype);Object.defineProperty(TDocumentCtor.prototype,'tagName',{value:'html',writable:false});Object.defineProperty(TDocumentCtor.prototype,'type',{value:'document',writable:false});Object.defineProperty(TDocumentCtor.prototype,'displayName',{value:'TDocument',writable:false});Object.defineProperty(TDocumentCtor.prototype,'elementModel',{value:htmlModel,writable:false});TDocumentCtor.prototype.parseChildren=function parseChildren(){var head;for(var child of this.children){if(child.tagName==='head'){head=child;break;}}this.context=Object.freeze(head?extractContextFromHead(head,this.attributes.lang,this.attributes.dir):_objectSpread(_objectSpread({},getDefaultDocumentContext()),{},{lang:this.attributes.lang,dir:this.attributes.dir}));};var _default=TDocumentCtor;exports.default=_default;","map":{"version":3,"names":["_HTMLElementModel","_interopRequireDefault","require","_domUtils","_TBlockCtor","defaultContextBase","Object","freeze","baseHref","baseTarget","charset","title","lang","dir","links","meta","getDefaultDocumentContext","assign","extractContextFromHead","head","context","domNode","children","filter","isDomElement","forEach","child","tagName","attribs","name","push","toLowerCase","titleChild","isDomText","data","trim","href","target","htmlModel","default","fromNativeModel","category","TDocumentCtor","TDocument","init","initialize","prototype","create","defineProperty","value","writable","parseChildren","attributes","_objectSpread"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/node_modules/react-native-render-html/node_modules/@native-html/transient-render-engine/lib/commonjs/tree/TDocumentImpl.ts"],"sourcesContent":["import { GenericTNodeCtor, Mutable } from './TNodeCtor';\nimport HTMLElementModel from '../model/HTMLElementModel';\nimport { isDomElement, isDomText } from '../dom/dom-utils';\nimport { TEmptyImpl } from './TEmptyCtor';\nimport { TNodeInit, TNodeImpl, DocumentContext } from './tree-types';\nimport TBlockImpl from './TBlockCtor';\n\nexport type TDocumentInit = Omit<TNodeInit, 'elementModel'>;\n\nexport interface TDocumentImpl extends TNodeImpl<TNodeInit> {\n  readonly context: Readonly<DocumentContext>;\n  /**\n   * Iterate over children and extract meta-information into context field.\n   * Replace children with a single-element array containing the body.\n   */\n  parseChildren(): void;\n}\n\nconst defaultContextBase: DocumentContext = Object.freeze({\n  baseHref: 'about:blank',\n  baseTarget: '_self',\n  charset: 'utf-8',\n  title: '',\n  lang: 'en',\n  dir: 'ltr',\n  links: [],\n  meta: []\n});\n\nfunction getDefaultDocumentContext(): DocumentContext {\n  return Object.assign({}, defaultContextBase, { links: [], meta: [] });\n}\n\nfunction extractContextFromHead(head: TEmptyImpl, lang?: string, dir?: string) {\n  const context = getDefaultDocumentContext();\n  if (lang) {\n    context.lang = lang;\n  }\n  if (dir) {\n    context.dir = 'rtl';\n  }\n  const domNode = head.domNode;\n  const children = domNode.children;\n  children.filter(isDomElement).forEach((child) => {\n    if (child.tagName === 'meta') {\n      if (child.attribs.name) {\n        context.meta.push(child.attribs as any);\n      } else if (child.attribs.charset) {\n        context.charset = child.attribs.charset.toLowerCase();\n      }\n    } else if (child.tagName === 'link') {\n      context.links.push(child.attribs);\n    } else if (child.tagName === 'title') {\n      for (const titleChild of child.children.filter(isDomText)) {\n        context.title = titleChild.data.trim();\n        break;\n      }\n    } else if (child.tagName === 'base') {\n      context.baseHref = child.attribs.href || context.baseHref;\n      context.baseTarget = (child.attribs.target as any) || context.baseTarget;\n    }\n  });\n  return context;\n}\n\nconst htmlModel = HTMLElementModel.fromNativeModel({\n  tagName: 'html' as any,\n  category: 'grouping'\n});\n\nconst TDocumentCtor = function TDocument(\n  this: Mutable<TDocumentImpl>,\n  init: TDocumentInit\n) {\n  this.initialize(init as TNodeInit);\n} as Function as GenericTNodeCtor<TDocumentInit, TDocumentImpl>;\n\nTDocumentCtor.prototype = Object.create(TBlockImpl.prototype);\n\nObject.defineProperty(TDocumentCtor.prototype, 'tagName', {\n  value: 'html',\n  writable: false\n});\n\nObject.defineProperty(TDocumentCtor.prototype, 'type', {\n  value: 'document',\n  writable: false\n});\n\nObject.defineProperty(TDocumentCtor.prototype, 'displayName', {\n  value: 'TDocument',\n  writable: false\n});\n\nObject.defineProperty(TDocumentCtor.prototype, 'elementModel', {\n  value: htmlModel,\n  writable: false\n});\n\nTDocumentCtor.prototype.parseChildren = function parseChildren(\n  this: Mutable<TDocumentImpl>\n) {\n  let head: TEmptyImpl | undefined;\n  for (const child of this.children) {\n    if (child.tagName === 'head') {\n      head = child as unknown as TEmptyImpl;\n      break;\n    }\n  }\n  this.context = Object.freeze(\n    head\n      ? extractContextFromHead(\n          head,\n          this.attributes!.lang,\n          this.attributes!.dir\n        )\n      : {\n          ...getDefaultDocumentContext(),\n          lang: this.attributes!.lang,\n          dir: this.attributes!.dir as any\n        }\n  );\n};\n\nexport { TDocumentCtor };\n\nexport default TDocumentCtor;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}