{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import React,{useEffect}from'react';import{useRoute}from'@react-navigation/native';import Image from\"react-native-web/dist/exports/Image\";import Platform from\"react-native-web/dist/exports/Platform\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import{Icons}from\"../../assets\";import styling from\"./SplashScreenStyle\";import*as Animatable from'react-native-animatable';import{navigationStrings}from\"../../constants\";import{get,save}from\"../../utils/Storage\";import*as constants from\"../../utils/constant\";import{setToken}from\"../../httpClient/ClientHelper\";import{useDispatch}from'react-redux';import{showLoader}from\"../../redux/actions/user\";import{moderateScale}from\"../../theme\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SplashScreenStyle=function SplashScreenStyle(_ref){var _route$params,_ref4;var navigation=_ref.navigation;var route=useRoute();var dispatch=useDispatch();var theme=route==null?void 0:(_route$params=route.params)==null?void 0:_route$params.theme;var styles=styling(theme);React.useEffect(function(){_asyncToGenerator(function*(){yield dispatch(showLoader(false));requestCameraAndAudioPermission();var login_res=yield get(constants.LOGIN_TOKEN);var otpVerify=yield get(\"otpVerify\");setTimeout(_asyncToGenerator(function*(){if(login_res&&otpVerify){yield setToken(login_res==null?void 0:login_res.jwt_token);dispatch({type:constants.LOGIN,payload:login_res});navigation.navigate(navigationStrings.BOTTOMTABSNAV);}else{yield save('otpVerify',false);navigation.navigate(navigationStrings.AUTHSTACK);}}),4000);})();},[]);var requestCameraAndAudioPermission=function requestCameraAndAudioPermission(){return(_ref4=_ref4||_asyncToGenerator(function*(){try{if(Platform.OS===\"android\"){var granted=yield PermissionsAndroid.requestMultiple([PermissionsAndroid.PERMISSIONS.CAMERA,PermissionsAndroid.PERMISSIONS.RECORD_AUDIO]);if(granted['android.permission.RECORD_AUDIO']===PermissionsAndroid.RESULTS.GRANTED&&granted['android.permission.CAMERA']===PermissionsAndroid.RESULTS.GRANTED){console.log('You can use the cameras & mic');}else{console.log('Permission denied');}}else{console.log(\"Not granted\");}}catch(err){console.log('permission--->',err);}})).apply(this,arguments);};return _jsxs(View,{style:styles.screen,children:[_jsx(Animatable.Image,{source:Icons.appLogo,animation:\"zoomIn\",delay:50,iterationDelay:50,resizeMode:'contain',style:styles.appLogo}),_jsx(Text,{style:styles.headText,children:\"Welcome\"}),_jsx(Image,{source:require(\"../../assets/images/Loader.gif\"),style:{position:'absolute',bottom:30,height:moderateScale(40),width:moderateScale(40),alignSelf:'center'},resizeMode:\"contain\"})]});};export default SplashScreenStyle;","map":{"version":3,"names":["React","useEffect","useRoute","Image","Platform","Text","TouchableOpacity","View","Icons","styling","Animatable","navigationStrings","get","save","constants","setToken","useDispatch","showLoader","moderateScale","jsx","_jsx","jsxs","_jsxs","SplashScreenStyle","_ref","_route$params","_ref4","navigation","route","dispatch","theme","params","styles","_asyncToGenerator","requestCameraAndAudioPermission","login_res","LOGIN_TOKEN","otpVerify","setTimeout","jwt_token","type","LOGIN","payload","navigate","BOTTOMTABSNAV","AUTHSTACK","OS","granted","PermissionsAndroid","requestMultiple","PERMISSIONS","CAMERA","RECORD_AUDIO","RESULTS","GRANTED","console","log","err","apply","arguments","style","screen","children","source","appLogo","animation","delay","iterationDelay","resizeMode","headText","require","position","bottom","height","width","alignSelf"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/src/modules/SplashScreen/SplashScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { useRoute } from '@react-navigation/native'\nimport { Image, Platform, Text, TouchableOpacity, View } from 'react-native'\nimport { Icons } from '../../assets'\nimport styling from './SplashScreenStyle'\nimport * as Animatable from 'react-native-animatable'\nimport { navigationStrings } from '../../constants'\nimport { get, save } from '../../utils/Storage'\nimport * as constants from '../../utils/constant'\nimport { setToken } from '../../httpClient/ClientHelper'\nimport { useDispatch } from 'react-redux'\nimport { showLoader } from '../../redux/actions/user'\nimport { moderateScale } from '../../theme'\n\nconst SplashScreenStyle = ({ navigation }) => {\n  const route = useRoute()\n  const dispatch = useDispatch()\n  const theme = route?.params?.theme\n  const styles = styling(theme)\n  React.useEffect(() => {\n    (async () => {\n      await dispatch(showLoader(false))\n\n      requestCameraAndAudioPermission()\n      let login_res = await get(constants.LOGIN_TOKEN)\n      let otpVerify = await get(\"otpVerify\")\n      setTimeout(async () => {\n        if (login_res && otpVerify) {\n          await setToken(login_res?.jwt_token)\n          dispatch({\n            type: constants.LOGIN,\n            payload: login_res,\n          })\n          navigation.navigate(navigationStrings.BOTTOMTABSNAV)\n        } else {\n          await save('otpVerify', false)\n          navigation.navigate(navigationStrings.AUTHSTACK)\n        }\n      }, 4000)\n    })()\n  }, [])\n\n  const requestCameraAndAudioPermission = async () => {\n    try {\n      if (Platform.OS === \"android\") {\n        const granted = await PermissionsAndroid.requestMultiple([\n          PermissionsAndroid.PERMISSIONS.CAMERA,\n          PermissionsAndroid.PERMISSIONS.RECORD_AUDIO,\n        ])\n        if (\n          granted['android.permission.RECORD_AUDIO'] ===\n          PermissionsAndroid.RESULTS.GRANTED &&\n          granted['android.permission.CAMERA'] ===\n          PermissionsAndroid.RESULTS.GRANTED\n        ) {\n          console.log('You can use the cameras & mic')\n        } else {\n          console.log('Permission denied')\n        }\n      }\n      else {\n        console.log(\"Not granted\")\n      }\n    } catch (err) {\n      console.log('permission--->', err)\n    }\n  }\n\n\n  return (\n    <View style={styles.screen}>\n      <Animatable.Image source={Icons.appLogo} animation='zoomIn' delay={50} iterationDelay={50} resizeMode={'contain'} style={styles.appLogo} />\n      <Text style={styles.headText}>Welcome</Text>\n      <Image source={require(\"../../assets/images/Loader.gif\")} style={{ position: 'absolute', bottom: 30, height: moderateScale(40), width: moderateScale(40), alignSelf: 'center', }} resizeMode='contain' />\n      {/* <Animatable.Text animation=\"fadeIn\" duration={4000} style={[styles.secondText, { alignSelf: 'center', color: 'black', fontWeight: '700', position: 'absolute', bottom: 30 }]}>Loading...</Animatable.Text> */}\n    </View>\n  )\n}\n\nexport default SplashScreenStyle\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}