{"ast":null,"code":"\"use strict\";var _defineProperty=require(\"@babel/runtime/helpers/defineProperty\");var _objectWithoutProperties=require(\"@babel/runtime/helpers/objectWithoutProperties\");var _excluded=[\"source\"],_excluded2=[\"onDocumentMetadataLoaded\",\"onTTreeChange\",\"contentWidth\"],_excluded3=[\"source\"],_excluded4=[\"source\"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=exports.renderSourcePropTypes=void 0;var _equals=_interopRequireDefault(require(\"ramda/src/equals\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native-web/dist/index\");var _propTypes=_interopRequireDefault(require(\"prop-types\"));var _ttreeEventsContext=_interopRequireDefault(require(\"./context/ttreeEventsContext\"));var _isUriSource=_interopRequireDefault(require(\"./helpers/isUriSource\"));var _SourceLoaderUri=_interopRequireDefault(require(\"./SourceLoaderUri\"));var _SourceLoaderInline=_interopRequireDefault(require(\"./SourceLoaderInline\"));var _SourceLoaderDom=_interopRequireDefault(require(\"./SourceLoaderDom\"));var _debugMessages=_interopRequireDefault(require(\"./debugMessages\"));var _contentWidthContext=_interopRequireDefault(require(\"./context/contentWidthContext\"));var _isDomSource=_interopRequireDefault(require(\"./helpers/isDomSource\"));var _useProfiler=_interopRequireDefault(require(\"./hooks/useProfiler\"));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!==\"function\")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!==\"default\"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var renderSourcePropTypes={source:_propTypes.default.oneOfType([_propTypes.default.shape({html:_propTypes.default.string.isRequired,baseUrl:_propTypes.default.string}),_propTypes.default.shape({dom:_propTypes.default.object.isRequired,baseUrl:_propTypes.default.string}),_propTypes.default.shape({uri:_propTypes.default.string.isRequired,method:_propTypes.default.string,body:_propTypes.default.any,headers:_propTypes.default.object})]),onTTreeChange:_propTypes.default.func,onHTMLLoaded:_propTypes.default.func,onDocumentMetadataLoaded:_propTypes.default.func,contentWidth:_propTypes.default.number};exports.renderSourcePropTypes=renderSourcePropTypes;function isEmptySource(source){return!source||typeof source.uri!=='string'&&typeof source.html!=='string'&&!source.dom;}function RawSourceLoader(_ref){var source=_ref.source,props=_objectWithoutProperties(_ref,_excluded);if(isEmptySource(source)){if(typeof __DEV__==='boolean'&&__DEV__){console.warn(_debugMessages.default.noSource);}return null;}if((0,_isUriSource.default)(source)){return _react.default.createElement(_SourceLoaderUri.default,_objectSpread({source:source},props));}if((0,_isDomSource.default)(source)){return _react.default.createElement(_SourceLoaderDom.default,_objectSpread({source:source},props));}return _react.default.createElement(_SourceLoaderInline.default,_objectSpread({source:source},props));}function shallowEqual(prop1,prop2){if(!(0,_equals.default)(Object.keys(prop1),Object.keys(prop2))){return false;}for(var key in prop1){if(prop1[key]!==prop2[key]){return false;}}return true;}var RenderHTMLSource=(0,_react.memo)(function RenderHtmlSource(_ref2){var onDocumentMetadataLoaded=_ref2.onDocumentMetadataLoaded,onTTreeChange=_ref2.onTTreeChange,contentWidth=_ref2.contentWidth,props=_objectWithoutProperties(_ref2,_excluded2);var profile=(0,_useProfiler.default)({prop:'onDocumentMetadataLoaded or onTTreeChange'});var ttreeEvents=(0,_react.useMemo)(function(){typeof __DEV__==='boolean'&&__DEV__&&profile();return{onDocumentMetadataLoaded:onDocumentMetadataLoaded,onTTreeChange:onTTreeChange};},[onDocumentMetadataLoaded,onTTreeChange,profile]);if(typeof __DEV__==='boolean'&&__DEV__){if(!(typeof contentWidth==='number')){console.warn(_debugMessages.default.contentWidth);}}return _react.default.createElement(_ttreeEventsContext.default.Provider,{value:ttreeEvents},_react.default.createElement(_contentWidthContext.default.Provider,{value:contentWidth||_reactNative.Dimensions.get('window').width},_react.default.createElement(RawSourceLoader,props)));},function(_ref3,_ref4){var currSource=_ref4.source,curr=_objectWithoutProperties(_ref4,_excluded3);var prevSource=_ref3.source,prev=_objectWithoutProperties(_ref3,_excluded4);return shallowEqual(prevSource,currSource)&&shallowEqual(prev,curr);});RenderHTMLSource.propTypes=renderSourcePropTypes;var _default=RenderHTMLSource;exports.default=_default;","map":{"version":3,"names":["_equals","_interopRequireDefault","require","_react","_interopRequireWildcard","_reactNative","_propTypes","_ttreeEventsContext","_isUriSource","_SourceLoaderUri","_SourceLoaderInline","_SourceLoaderDom","_debugMessages","_contentWidthContext","_isDomSource","_useProfiler","renderSourcePropTypes","source","default","oneOfType","shape","html","string","isRequired","baseUrl","dom","object","uri","method","body","any","headers","onTTreeChange","func","onHTMLLoaded","onDocumentMetadataLoaded","contentWidth","number","isEmptySource","RawSourceLoader","_ref","props","_objectWithoutProperties","_excluded","__DEV__","console","warn","noSource","createElement","_objectSpread","shallowEqual","prop1","prop2","Object","keys","key","RenderHTMLSource","memo","RenderHtmlSource","_ref2","_excluded2","profile","prop","ttreeEvents","useMemo","Provider","value","Dimensions","get","width","_ref3","_ref4","currSource","curr","_excluded3","prevSource","prev","_excluded4","propTypes"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/node_modules/react-native-render-html/lib/commonjs/RenderHTMLSource.tsx"],"sourcesContent":["import equals from 'ramda/src/equals';\nimport React, { memo, ReactElement, useMemo } from 'react';\nimport { Dimensions } from 'react-native';\nimport PropTypes from 'prop-types';\nimport ttreeEventsContext from './context/ttreeEventsContext';\nimport isUriSource from './helpers/isUriSource';\nimport { SourceLoaderProps, TTreeEvents } from './internal-types';\nimport {\n  HTMLSourceDom,\n  HTMLSourceInline,\n  RenderHTMLSourceProps,\n  HTMLSourceUri,\n  HTMLSource\n} from './shared-types';\nimport SourceLoaderUri from './SourceLoaderUri';\nimport SourceLoaderInline from './SourceLoaderInline';\nimport SourceLoaderDom from './SourceLoaderDom';\nimport debugMessage from './debugMessages';\nimport contentWidthContext from './context/contentWidthContext';\nimport isDomSource from './helpers/isDomSource';\nimport useProfiler from './hooks/useProfiler';\n\nexport type RenderHTMLSourcePropTypes = Record<\n  keyof RenderHTMLSourceProps,\n  any\n>;\n\nexport const renderSourcePropTypes: RenderHTMLSourcePropTypes = {\n  source: PropTypes.oneOfType([\n    PropTypes.shape({\n      html: PropTypes.string.isRequired,\n      baseUrl: PropTypes.string\n    }),\n    PropTypes.shape({\n      dom: PropTypes.object.isRequired,\n      baseUrl: PropTypes.string\n    }),\n    PropTypes.shape({\n      uri: PropTypes.string.isRequired,\n      method: PropTypes.string,\n      body: PropTypes.any,\n      headers: PropTypes.object\n    })\n  ]),\n  onTTreeChange: PropTypes.func,\n  onHTMLLoaded: PropTypes.func,\n  onDocumentMetadataLoaded: PropTypes.func,\n  contentWidth: PropTypes.number\n};\n\nfunction isEmptySource(source: undefined | HTMLSource) {\n  return (\n    !source ||\n    (typeof (source as HTMLSourceUri).uri !== 'string' &&\n      typeof (source as HTMLSourceInline).html !== 'string' &&\n      !(source as HTMLSourceDom).dom)\n  );\n}\n\nfunction RawSourceLoader({\n  source,\n  ...props\n}: SourceLoaderProps): ReactElement | null {\n  if (isEmptySource(source)) {\n    /* istanbul ignore next */\n    if (typeof __DEV__ === 'boolean' && __DEV__) {\n      console.warn(debugMessage.noSource);\n    }\n    return null;\n  }\n  if (isUriSource(source)) {\n    return React.createElement(SourceLoaderUri, { source, ...props });\n  }\n  if (isDomSource(source)) {\n    return React.createElement(SourceLoaderDom, { source, ...props });\n  }\n  return React.createElement(SourceLoaderInline, { source, ...props });\n}\n\n// check if for each key of two objects, the values are equal\nfunction shallowEqual(prop1: any, prop2: any) {\n  if (!equals(Object.keys(prop1), Object.keys(prop2))) {\n    return false;\n  }\n  for (const key in prop1) {\n    if (prop1[key] !== prop2[key]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * A React component to render HTML snippets.\n *\n * @remarks This component is useful when you have to load dozens of HTML\n * snippets with the same config. Performance is expected to improve in such\n * scenarios.\n *\n * @warning This component requires to have {@link TRenderEngineProvider}\n * and {@link RenderHTMLConfigProvider} as parents.\n */\nconst RenderHTMLSource = memo(\n  function RenderHtmlSource({\n    onDocumentMetadataLoaded,\n    onTTreeChange,\n    contentWidth,\n    ...props\n  }: RenderHTMLSourceProps) {\n    const profile = useProfiler({\n      prop: 'onDocumentMetadataLoaded or onTTreeChange'\n    });\n    const ttreeEvents: TTreeEvents = useMemo(() => {\n      typeof __DEV__ === 'boolean' && __DEV__ && profile();\n      return {\n        onDocumentMetadataLoaded,\n        onTTreeChange\n      };\n    }, [onDocumentMetadataLoaded, onTTreeChange, profile]);\n    if (typeof __DEV__ === 'boolean' && __DEV__) {\n      if (!(typeof contentWidth === 'number')) {\n        console.warn(debugMessage.contentWidth);\n      }\n    }\n    return (\n      <ttreeEventsContext.Provider value={ttreeEvents}>\n        <contentWidthContext.Provider\n          value={contentWidth || Dimensions.get('window').width}>\n          {React.createElement(RawSourceLoader, props)}\n        </contentWidthContext.Provider>\n      </ttreeEventsContext.Provider>\n    );\n  },\n  ({ source: prevSource, ...prev }, { source: currSource, ...curr }) => {\n    return shallowEqual(prevSource, currSource) && shallowEqual(prev, curr);\n  }\n);\n\n/**\n * @ignore\n */\n(RenderHTMLSource as any).propTypes = renderSourcePropTypes;\n\nexport default RenderHTMLSource;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}