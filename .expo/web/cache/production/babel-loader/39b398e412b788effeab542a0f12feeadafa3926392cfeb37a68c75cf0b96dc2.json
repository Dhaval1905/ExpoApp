{"ast":null,"code":"\"use strict\";var _defineProperty=require(\"@babel/runtime/helpers/defineProperty\");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}Object.defineProperty(exports,\"__esModule\",{value:true});exports.mapNodeList=mapNodeList;exports.bindChildren=bindChildren;exports.translateNode=translateNode;exports.translateDocument=translateDocument;var _TTextCtor=require(\"../tree/TTextCtor\");var _TPhrasingCtor=require(\"../tree/TPhrasingCtor\");var _TBlockCtor=require(\"../tree/TBlockCtor\");var _TDocumentImpl=require(\"../tree/TDocumentImpl\");var _domUtils=require(\"../dom/dom-utils\");var _TEmptyCtor=require(\"../tree/TEmptyCtor\");function mapNodeList(_ref){var nodeList=_ref.nodeList,parent=_ref.parent,parentStyles=_ref.parentStyles,params=_ref.params;var nextMap=[];for(var i in nodeList){var child=nodeList[i];var translated=translateNode({node:child,parentStyles:parentStyles,params:params,nodeIndex:Number(i),parent:parent});if(translated){nextMap.push(translated);}}return nextMap;}function bindChildren(node,children,params){if(!node.elementModel||!node.elementModel.isOpaque){node.bindChildren(mapNodeList({nodeList:children,parent:node,params:params}));}}function translateElement(_ref2){var node=_ref2.node,nodeIndex=_ref2.nodeIndex,params=_ref2.params,parent=_ref2.parent,parentStyles=_ref2.parentStyles;var tagName=node.tagName;var sharedProps={nodeIndex:nodeIndex,parentStyles:parentStyles,context:params,domNode:node,parent:parent};var elementModel=params.modelRegistry.getElementModelFromTagName(tagName);if(!elementModel){return new _TEmptyCtor.TEmptyCtor(_objectSpread(_objectSpread({},sharedProps),{},{isUnregistered:true,elementModel:elementModel,domNode:node}));}if(elementModel.isTranslatableTextual()){if(node.children.length===1){var child=node.children[0];if((0,_domUtils.isDomText)(child)){return new _TTextCtor.TTextCtor(_objectSpread(_objectSpread({},sharedProps),{},{elementModel:elementModel,textNode:child,domNode:node}));}}else if(node.children.length===0){return new _TTextCtor.TTextCtor(_objectSpread(_objectSpread({},sharedProps),{},{elementModel:elementModel,domNode:node,textNode:new _domUtils.Text('')}));}var phrasing=new _TPhrasingCtor.TPhrasingCtor(_objectSpread(_objectSpread({},sharedProps),{},{domNode:node,elementModel:elementModel}));bindChildren(phrasing,node.children,params);return phrasing;}if(elementModel.isTranslatableBlock()){var block=new _TBlockCtor.TBlockCtor(_objectSpread(_objectSpread({},sharedProps),{},{elementModel:elementModel,parentStyles:parentStyles,domNode:node}));bindChildren(block,node.children,params);return block;}return new _TEmptyCtor.TEmptyCtor(_objectSpread(_objectSpread({},sharedProps),{},{isUnregistered:false,elementModel:elementModel,domNode:node}));}function translateNode(_ref3){var node=_ref3.node,parentStyles=_ref3.parentStyles,params=_ref3.params,nodeIndex=_ref3.nodeIndex,parent=_ref3.parent;if((0,_domUtils.isDomText)(node)){return new _TTextCtor.TTextCtor({textNode:node,context:params,parentStyles:parentStyles,domNode:null,elementModel:null,nodeIndex:nodeIndex,parent:parent});}if((0,_domUtils.isDomElement)(node)){return translateElement({node:node,parentStyles:parentStyles,params:params,nodeIndex:nodeIndex,parent:parent});}return null;}function translateDocument(document,params){var tdoc=new _TDocumentImpl.TDocumentCtor({context:params,styles:params.baseStyles,domNode:document});bindChildren(tdoc,document.children,params);tdoc.parseChildren();return tdoc;}","map":{"version":3,"names":["_TTextCtor","require","_TPhrasingCtor","_TBlockCtor","_TDocumentImpl","_domUtils","_TEmptyCtor","mapNodeList","_ref","nodeList","parent","parentStyles","params","nextMap","i","child","translated","translateNode","node","nodeIndex","Number","push","bindChildren","children","elementModel","isOpaque","translateElement","_ref2","tagName","sharedProps","context","domNode","modelRegistry","getElementModelFromTagName","TEmptyCtor","_objectSpread","isUnregistered","isTranslatableTextual","length","isDomText","TTextCtor","textNode","Text","phrasing","TPhrasingCtor","isTranslatableBlock","block","TBlockCtor","_ref3","isDomElement","translateDocument","document","tdoc","TDocumentCtor","styles","baseStyles","parseChildren"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/node_modules/react-native-render-html/node_modules/@native-html/transient-render-engine/lib/commonjs/flow/translate.ts"],"sourcesContent":["import { TNodeImpl, TNodeInit } from '../tree/tree-types';\nimport { Document } from 'domhandler';\nimport { TTextCtor } from '../tree/TTextCtor';\nimport { TPhrasingCtor } from '../tree/TPhrasingCtor';\nimport { TBlockCtor } from '../tree/TBlockCtor';\nimport { TDocumentCtor, TDocumentImpl } from '../tree/TDocumentImpl';\nimport { isDomElement, isDomText, Element, Node, Text } from '../dom/dom-utils';\nimport { TStyles } from '../styles/TStyles';\n\nimport { TEmptyCtor } from '../tree/TEmptyCtor';\nimport { DataFlowParams } from './types';\n\nexport function mapNodeList({\n  nodeList,\n  parent,\n  parentStyles,\n  params\n}: {\n  nodeList: Node[];\n  parentStyles?: TStyles;\n  parent: TNodeImpl | null;\n  params: DataFlowParams;\n}): TNodeImpl[] {\n  const nextMap: TNodeImpl[] = [];\n  for (const i in nodeList) {\n    const child = nodeList[i];\n    const translated = translateNode({\n      node: child,\n      parentStyles,\n      params,\n      nodeIndex: Number(i),\n      parent\n    });\n    if (translated) {\n      nextMap.push(translated);\n    }\n  }\n  return nextMap;\n}\n\nexport function bindChildren(\n  node: TNodeImpl,\n  children: Node[],\n  params: DataFlowParams\n) {\n  if (!node.elementModel || !node.elementModel.isOpaque) {\n    node.bindChildren(\n      mapNodeList({\n        nodeList: children,\n        parent: node,\n        params\n      })\n    );\n  }\n}\n\nfunction translateElement({\n  node,\n  nodeIndex,\n  params,\n  parent,\n  parentStyles\n}: TranslateParams<Element>): TNodeImpl | null {\n  const tagName = node.tagName;\n  const sharedProps: Omit<TNodeInit, 'contentModel' | 'elementModel'> = {\n    nodeIndex,\n    parentStyles,\n    context: params,\n    domNode: node,\n    parent\n  };\n  const elementModel = params.modelRegistry.getElementModelFromTagName(tagName);\n  if (!elementModel) {\n    return new TEmptyCtor({\n      ...sharedProps,\n      isUnregistered: true,\n      elementModel,\n      domNode: node\n    });\n  }\n  if (elementModel.isTranslatableTextual()) {\n    if (node.children.length === 1) {\n      const child = node.children[0] as Node;\n      if (isDomText(child)) {\n        return new TTextCtor({\n          ...sharedProps,\n          elementModel,\n          textNode: child,\n          domNode: node\n        });\n      }\n    } else if (node.children.length === 0) {\n      return new TTextCtor({\n        ...sharedProps,\n        elementModel,\n        domNode: node,\n        textNode: new Text('')\n      });\n    }\n    const phrasing = new TPhrasingCtor({\n      ...sharedProps,\n      domNode: node,\n      elementModel\n    });\n    bindChildren(phrasing, node.children, params);\n    return phrasing;\n  }\n  if (elementModel.isTranslatableBlock()) {\n    const block = new TBlockCtor({\n      ...sharedProps,\n      elementModel,\n      parentStyles,\n      domNode: node\n    });\n    bindChildren(block, node.children, params);\n    return block;\n  }\n  return new TEmptyCtor({\n    ...sharedProps,\n    isUnregistered: false,\n    elementModel,\n    domNode: node\n  });\n}\n\ninterface TranslateParams<T = Node> {\n  node: T;\n  params: DataFlowParams;\n  parent: TNodeImpl | null;\n  parentStyles?: TStyles;\n  nodeIndex?: number;\n}\n\nexport function translateNode({\n  node,\n  parentStyles,\n  params,\n  nodeIndex,\n  parent\n}: TranslateParams<Node | null>): TNodeImpl | null {\n  if (isDomText(node)) {\n    return new TTextCtor({\n      textNode: node,\n      context: params,\n      parentStyles,\n      domNode: null,\n      elementModel: null,\n      nodeIndex,\n      parent\n    });\n  }\n  if (isDomElement(node)) {\n    return translateElement({\n      node,\n      parentStyles,\n      params,\n      nodeIndex,\n      parent\n    });\n  }\n  return null;\n}\n\nexport function translateDocument(\n  document: Document,\n  params: DataFlowParams\n): TDocumentImpl {\n  const tdoc = new TDocumentCtor({\n    context: params,\n    styles: params.baseStyles,\n    domNode: document as any\n  });\n  bindChildren(tdoc, document.children, params);\n  tdoc.parseChildren();\n  return tdoc;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}