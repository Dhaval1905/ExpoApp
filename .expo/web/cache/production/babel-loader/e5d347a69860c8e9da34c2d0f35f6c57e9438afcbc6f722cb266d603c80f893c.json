{"ast":null,"code":"\"use strict\";var _classCallCheck=require(\"@babel/runtime/helpers/classCallCheck\");var _createClass=require(\"@babel/runtime/helpers/createClass\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _lookupRecord=_interopRequireDefault(require(\"../helpers/lookupRecord\"));var _BRRenderer=_interopRequireDefault(require(\"../renderers/BRRenderer\"));var _WBRRenderer=_interopRequireDefault(require(\"../renderers/WBRRenderer\"));var _internalRenderers=_interopRequireDefault(require(\"./internalRenderers\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var internalTextRenderers={br:_BRRenderer.default,wbr:_WBRRenderer.default};var RenderRegistry=function(){function RenderRegistry(){var customRenderers=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var elementModels=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,RenderRegistry);_defineProperty(this,\"customRenderers\",{});_defineProperty(this,\"elementModels\",void 0);this.customRenderers=customRenderers;this.elementModels=elementModels;}_createClass(RenderRegistry,[{key:\"getCustomRendererForTNode\",value:function getCustomRendererForTNode(tnode){if(tnode.tagName in this.customRenderers){var renderer=this.customRenderers[tnode.tagName];if(typeof __DEV__==='boolean'&&__DEV__){var elementModel=this.elementModels[tnode.tagName];if(!elementModel){console.warn(`You are attempting to render a ${tnode.tagName} tag but you didn't provide an HTMLElementModel. Make sure you register a model for this tag in \"customHTMLElementModels\" prop. `);}else if(!tnode.matchContentModel(elementModel.contentModel)){console.warn(`You are attempting to render \"${tnode.tagName}\" of type \"${tnode.displayName}\", but the registered renderer is of content model type ${elementModel===null||elementModel===void 0?void 0:elementModel.contentModel} which is incompatible with \"${tnode.displayName}\".`);}}return renderer;}return null;}},{key:\"getDefaultRendererForTNode\",value:function getDefaultRendererForTNode(tnode){if(tnode.tagName in _internalRenderers.default){return _internalRenderers.default[tnode.tagName];}return null;}},{key:\"getInternalTextRenderer\",value:function getInternalTextRenderer(tagName){if((0,_lookupRecord.default)(internalTextRenderers,tagName)){return internalTextRenderers[tagName];}return null;}},{key:\"getRendererConfigForTNode\",value:function getRendererConfigForTNode(tnode){return{Custom:this.getCustomRendererForTNode(tnode),Default:this.getDefaultRendererForTNode(tnode)};}}]);return RenderRegistry;}();exports.default=RenderRegistry;","map":{"version":3,"names":["_lookupRecord","_interopRequireDefault","require","_BRRenderer","_WBRRenderer","_internalRenderers","internalTextRenderers","br","default","wbr","RenderRegistry","customRenderers","arguments","length","undefined","elementModels","_classCallCheck","_defineProperty","_createClass","key","value","getCustomRendererForTNode","tnode","tagName","renderer","__DEV__","elementModel","console","warn","matchContentModel","contentModel","displayName","getDefaultRendererForTNode","getInternalTextRenderer","getRendererConfigForTNode","Custom","Default"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/node_modules/react-native-render-html/lib/commonjs/render/RenderRegistry.ts"],"sourcesContent":["import { TNode } from '@native-html/transient-render-engine';\nimport { ComponentType } from 'react';\nimport { CustomRendererProps } from '..';\nimport lookupRecord from '../helpers/lookupRecord';\nimport BRRenderer from '../renderers/BRRenderer';\nimport WBRRenderer from '../renderers/WBRRenderer';\nimport {\n  CustomRenderer,\n  HTMLElementModelRecord,\n  InternalRenderer\n} from '../shared-types';\nimport internalRenderers from './internalRenderers';\nimport {\n  CustomTagRendererRecord,\n  InternalTextContentRenderer\n} from './render-types';\n\nconst internalTextRenderers: Record<string, InternalTextContentRenderer> = {\n  br: BRRenderer,\n  wbr: WBRRenderer\n};\n\nexport interface RendererConfig<T extends TNode> {\n  Custom: CustomRenderer<T> | null;\n  Default: InternalRenderer<T> | null;\n}\n\nexport default class RenderRegistry {\n  constructor(\n    customRenderers: CustomTagRendererRecord = {},\n    elementModels: HTMLElementModelRecord\n  ) {\n    this.customRenderers = customRenderers;\n    this.elementModels = elementModels;\n  }\n\n  private readonly customRenderers: CustomTagRendererRecord = {};\n  private readonly elementModels: HTMLElementModelRecord;\n\n  private getCustomRendererForTNode<T extends TNode>(\n    tnode: T\n  ): ComponentType<CustomRendererProps<T>> | null {\n    if (tnode.tagName! in this.customRenderers) {\n      const renderer = this.customRenderers[tnode.tagName!];\n      /* istanbul ignore next */\n      if (typeof __DEV__ === 'boolean' && __DEV__) {\n        // In DEV, check for discrepancies.\n        const elementModel = this.elementModels[tnode.tagName!];\n        if (!elementModel) {\n          console.warn(\n            `You are attempting to render a ${tnode.tagName!} tag but you didn't provide an HTMLElementModel. Make sure you register a model for this tag in \"customHTMLElementModels\" prop. `\n          );\n        } else if (!tnode.matchContentModel(elementModel.contentModel)) {\n          console.warn(\n            `You are attempting to render \"${tnode.tagName}\" of type \"${tnode.displayName}\", but the registered renderer is of content model type ${elementModel?.contentModel} which is incompatible with \"${tnode.displayName}\".`\n          );\n        }\n      }\n      return renderer as any;\n    }\n    return null;\n  }\n\n  private getDefaultRendererForTNode<T extends TNode>(\n    tnode: T\n  ): InternalRenderer<T> | null {\n    if (tnode.tagName! in internalRenderers) {\n      //@ts-expect-error we know that the tagName is in the map\n      return internalRenderers[tnode.tagName!];\n    }\n    return null;\n  }\n\n  getInternalTextRenderer(tagName: string | null) {\n    if (lookupRecord(internalTextRenderers, tagName)) {\n      return internalTextRenderers[tagName];\n    }\n    return null;\n  }\n\n  getRendererConfigForTNode<T extends TNode>(tnode: T): RendererConfig<T> {\n    return {\n      Custom: this.getCustomRendererForTNode(tnode),\n      Default: this.getDefaultRendererForTNode(tnode)\n    };\n  }\n}\n"],"mappings":"iOAGA,IAAAA,aAAA,CAAAC,sBAAA,CAAAC,OAAA,6BACA,IAAAC,WAAA,CAAAF,sBAAA,CAAAC,OAAA,6BACA,IAAAE,YAAA,CAAAH,sBAAA,CAAAC,OAAA,8BAMA,IAAAG,kBAAA,CAAAJ,sBAAA,CAAAC,OAAA,yB,yQAMA,GAAM,CAAAI,qBAAkE,CAAG,CACzEC,EAAE,CAAEJ,WAAA,CAAAK,OADqE,CAEzEC,GAAG,CAAEL,YAAA,CAAAI,OAFoE,CAA3E,IAUqB,CAAAE,cAAN,YACb,SAAAA,eAAA,CAGE,IAFA,CAAAC,eAAwC,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,EADlC,IAET,CAAAG,aAFS,CAAAH,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAE,SAAA,CAAAE,eAAA,MAAAN,cAAA,EAGTO,eAAA,wBAK0D,EAL1D,EAAAA,eAAA,8BACA,KAAKN,eAAL,CAAuBA,eAAvB,CACA,KAAKI,aAAL,CAAqBA,aAArB,CACD,CAAAG,YAAA,CAAAR,cAAA,GAAAS,GAAA,6BAAAC,KAAA,CAKO,SAAAC,0BACNC,KAD+B,CAEe,CAC9C,GAAIA,KAAK,CAACC,OAAN,GAAkB,MAAKZ,eAA3B,CAA4C,CAC1C,GAAM,CAAAa,QAAQ,CAAG,KAAKb,eAAL,CAAqBW,KAAK,CAACC,OAA3B,CAAjB,CAEA,GAAI,MAAO,CAAAE,OAAP,GAAmB,SAAnB,EAAgCA,OAApC,CAA6C,CAE3C,GAAM,CAAAC,YAAY,CAAG,KAAKX,aAAL,CAAmBO,KAAK,CAACC,OAAzB,CAArB,CACA,GAAI,CAACG,YAAL,CAAmB,CACjBC,OAAO,CAACC,IAAR,CACG,kCAAiCN,KAAK,CAACC,OAAS,kIADnD,EAGD,CAJD,IAIO,IAAI,CAACD,KAAK,CAACO,iBAAN,CAAwBH,YAAY,CAACI,YAArC,CAAL,CAAyD,CAC9DH,OAAO,CAACC,IAAR,CACG,iCAAgCN,KAAK,CAACC,OAAQ,cAAaD,KAAK,CAACS,WAAY,2DAA0DL,YAAxI,SAAwIA,YAAxI,iBAAwIA,YAAY,CAAEI,YAAa,gCAA+BR,KAAK,CAACS,WAAY,IADtN,EAGD,CACF,CACD,MAAO,CAAAP,QAAP,CACD,CACD,MAAO,KAAP,CACD,IAAAL,GAAA,8BAAAC,KAAA,CAEO,SAAAY,2BACNV,KADgC,CAEJ,CAC5B,GAAIA,KAAK,CAACC,OAAN,GAAkB,CAAAlB,kBAAA,CAAAG,OAAtB,CAAyC,CAEvC,MAAO,CAAAH,kBAAA,CAAAG,OAAA,CAAkBc,KAAK,CAACC,OAAxB,CAAP,CACD,CACD,MAAO,KAAP,CACD,IAAAJ,GAAA,2BAAAC,KAAA,CAED,SAAAa,wBAAwBV,OAAD,CAAyB,CAC9C,GAAI,GAAAvB,aAAA,CAAAQ,OAAA,EAAaF,qBAAb,CAAoCiB,OAApC,CAAJ,CAAkD,CAChD,MAAO,CAAAjB,qBAAqB,CAACiB,OAAD,CAA5B,CACD,CACD,MAAO,KAAP,CACD,IAAAJ,GAAA,6BAAAC,KAAA,CAED,SAAAc,0BAA2CZ,KAAlB,CAA+C,CACtE,MAAO,CACLa,MAAM,CAAE,KAAKd,yBAAL,CAA+BC,KAA/B,CADH,CAELc,OAAO,CAAE,KAAKJ,0BAAL,CAAgCV,KAAhC,CAFJ,CAAP,CAID,YAAAZ,cAAA,K"},"metadata":{},"sourceType":"script","externalDependencies":[]}