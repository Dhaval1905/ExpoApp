{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nvar _askForMediaPermissionAsync, _askForMicrophonePermissionAsync, _askForCameraPermissionAsync, _askForLocationPermissionAsync, _getPermissionWithQueryAsync, _enumerateDevices, _askSensorPermissionAsync, _getMediaMaybeGrantedAsync, _getPermissionAsync, _getAsync, _askAsync;\nimport { PermissionStatus } from \"./Permissions.types\";\nfunction _getUserMedia(constraints) {\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    return navigator.mediaDevices.getUserMedia(constraints);\n  }\n  var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || function () {\n    var error = new Error('Permission unimplemented');\n    error.code = 0;\n    error.name = 'NotAllowedError';\n    throw error;\n  };\n  return new Promise(function (resolve, reject) {\n    getUserMedia.call(navigator, constraints, resolve, reject);\n  });\n}\nfunction askForMediaPermissionAsync(_x) {\n  return (_askForMediaPermissionAsync = _askForMediaPermissionAsync || _asyncToGenerator(function* (options) {\n    try {\n      yield _getUserMedia(options);\n      return {\n        status: PermissionStatus.GRANTED,\n        expires: 'never',\n        canAskAgain: true,\n        granted: true\n      };\n    } catch (_ref) {\n      var message = _ref.message;\n      if (message === 'Permission dismissed') {\n        return {\n          status: PermissionStatus.UNDETERMINED,\n          expires: 'never',\n          canAskAgain: true,\n          granted: false\n        };\n      } else {\n        return {\n          status: PermissionStatus.DENIED,\n          expires: 'never',\n          canAskAgain: true,\n          granted: false\n        };\n      }\n    }\n  })).apply(this, arguments);\n}\nfunction askForMicrophonePermissionAsync() {\n  return (_askForMicrophonePermissionAsync = _askForMicrophonePermissionAsync || _asyncToGenerator(function* () {\n    return yield askForMediaPermissionAsync({\n      audio: true\n    });\n  })).apply(this, arguments);\n}\nfunction askForCameraPermissionAsync() {\n  return (_askForCameraPermissionAsync = _askForCameraPermissionAsync || _asyncToGenerator(function* () {\n    return yield askForMediaPermissionAsync({\n      video: true\n    });\n  })).apply(this, arguments);\n}\nfunction askForLocationPermissionAsync() {\n  return (_askForLocationPermissionAsync = _askForLocationPermissionAsync || _asyncToGenerator(function* () {\n    return new Promise(function (resolve) {\n      navigator.geolocation.getCurrentPosition(function () {\n        return resolve({\n          status: PermissionStatus.GRANTED,\n          expires: 'never',\n          canAskAgain: true,\n          granted: true\n        });\n      }, function (_ref2) {\n        var code = _ref2.code;\n        if (code === 1) {\n          resolve({\n            status: PermissionStatus.DENIED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: false\n          });\n        } else {\n          resolve({\n            status: PermissionStatus.UNDETERMINED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: false\n          });\n        }\n      });\n    });\n  })).apply(this, arguments);\n}\nfunction getPermissionWithQueryAsync(_x2) {\n  return (_getPermissionWithQueryAsync = _getPermissionWithQueryAsync || _asyncToGenerator(function* (name) {\n    if (!navigator || !navigator.permissions || !navigator.permissions.query) return null;\n    var _yield$navigator$perm = yield navigator.permissions.query({\n        name: name\n      }),\n      state = _yield$navigator$perm.state;\n    if (state === 'prompt') {\n      return PermissionStatus.UNDETERMINED;\n    } else if (state === 'granted') {\n      return PermissionStatus.GRANTED;\n    } else if (state === 'denied') {\n      return PermissionStatus.DENIED;\n    }\n    return null;\n  })).apply(this, arguments);\n}\nfunction enumerateDevices() {\n  return (_enumerateDevices = _enumerateDevices || _asyncToGenerator(function* () {\n    if (navigator && navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\n      return yield navigator.mediaDevices.enumerateDevices();\n    }\n    if (window.MediaStreamTrack && typeof window.MediaStreamTrack.getSources === 'function') {\n      return yield MediaStreamTrack.getSources();\n    }\n    return null;\n  })).apply(this, arguments);\n}\nfunction askSensorPermissionAsync() {\n  return (_askSensorPermissionAsync = _askSensorPermissionAsync || _asyncToGenerator(function* () {\n    var requestPermission = getRequestMotionPermission();\n    if (!requestPermission) return PermissionStatus.GRANTED;\n    var status = yield requestPermission();\n    switch (status) {\n      case 'granted':\n        return PermissionStatus.GRANTED;\n      case 'denied':\n        return PermissionStatus.DENIED;\n      default:\n        return PermissionStatus.UNDETERMINED;\n    }\n  })).apply(this, arguments);\n}\nfunction getMediaMaybeGrantedAsync(_x3) {\n  return (_getMediaMaybeGrantedAsync = _getMediaMaybeGrantedAsync || _asyncToGenerator(function* (targetKind) {\n    var devices = yield enumerateDevices();\n    if (!devices) {\n      return false;\n    }\n    var result = yield devices.filter(function (_ref3) {\n      var kind = _ref3.kind;\n      return kind === targetKind;\n    }).some(function (_ref4) {\n      var label = _ref4.label;\n      return label !== '';\n    });\n    return result;\n  })).apply(this, arguments);\n}\nfunction getPermissionAsync(_x4, _x5) {\n  return (_getPermissionAsync = _getPermissionAsync || _asyncToGenerator(function* (permission, shouldAsk) {\n    switch (permission) {\n      case 'userFacingNotifications':\n      case 'notifications':\n        {\n          if (!shouldAsk) {\n            var status = yield getPermissionWithQueryAsync('notifications');\n            if (status) {\n              return {\n                status: status,\n                expires: 'never',\n                granted: status === PermissionStatus.GRANTED,\n                canAskAgain: true\n              };\n            }\n          }\n          var _window = window,\n            _window$Notification = _window.Notification,\n            Notification = _window$Notification === void 0 ? {} : _window$Notification;\n          if (Notification.requestPermission) {\n            var _status = Notification.permission;\n            if (shouldAsk) {\n              _status = yield Notification.requestPermission();\n            }\n            if (!_status || _status === 'default') {\n              return {\n                status: PermissionStatus.UNDETERMINED,\n                expires: 'never',\n                canAskAgain: true,\n                granted: false\n              };\n            }\n            return {\n              status: _status,\n              expires: 'never',\n              canAskAgain: true,\n              granted: _status === PermissionStatus.GRANTED\n            };\n          }\n        }\n        break;\n      case 'motion':\n        {\n          if (shouldAsk) {\n            var _status2 = yield askSensorPermissionAsync();\n            return {\n              status: _status2,\n              expires: 'never',\n              granted: _status2 === PermissionStatus.GRANTED,\n              canAskAgain: false\n            };\n          }\n          var _status3 = getRequestMotionPermission() ? PermissionStatus.UNDETERMINED : isIOS() ? PermissionStatus.DENIED : PermissionStatus.GRANTED;\n          return {\n            status: _status3,\n            expires: 'never',\n            canAskAgain: true,\n            granted: _status3 === PermissionStatus.GRANTED\n          };\n        }\n      case 'location':\n      case 'locationForeground':\n      case 'locationBackground':\n        {\n          var maybeStatus = yield getPermissionWithQueryAsync('geolocation');\n          if (maybeStatus) {\n            if (maybeStatus === PermissionStatus.UNDETERMINED && shouldAsk) {\n              return yield askForLocationPermissionAsync();\n            }\n            return {\n              status: maybeStatus,\n              expires: 'never',\n              canAskAgain: true,\n              granted: maybeStatus === PermissionStatus.GRANTED\n            };\n          } else if (shouldAsk) {\n            return yield askForLocationPermissionAsync();\n          }\n        }\n        break;\n      case 'audioRecording':\n        {\n          var _maybeStatus = yield getPermissionWithQueryAsync('microphone');\n          if (_maybeStatus) {\n            if (_maybeStatus === PermissionStatus.UNDETERMINED && shouldAsk) {\n              return yield askForMicrophonePermissionAsync();\n            }\n            return {\n              status: _maybeStatus,\n              expires: 'never',\n              canAskAgain: true,\n              granted: _maybeStatus === PermissionStatus.GRANTED\n            };\n          } else if (shouldAsk) {\n            return yield askForMicrophonePermissionAsync();\n          } else {\n            var maybeGranted = yield getMediaMaybeGrantedAsync('audioinput');\n            if (maybeGranted) {\n              return {\n                status: PermissionStatus.GRANTED,\n                expires: 'never',\n                canAskAgain: true,\n                granted: true\n              };\n            }\n          }\n        }\n        break;\n      case 'camera':\n        {\n          var _maybeStatus2 = yield getPermissionWithQueryAsync('camera');\n          if (_maybeStatus2) {\n            if (_maybeStatus2 === PermissionStatus.UNDETERMINED && shouldAsk) {\n              return yield askForCameraPermissionAsync();\n            }\n            return {\n              status: _maybeStatus2,\n              expires: 'never',\n              canAskAgain: true,\n              granted: _maybeStatus2 === PermissionStatus.GRANTED\n            };\n          } else if (shouldAsk) {\n            return yield askForCameraPermissionAsync();\n          } else {\n            var _maybeGranted = yield getMediaMaybeGrantedAsync('videoinput');\n            if (_maybeGranted) {\n              return {\n                status: PermissionStatus.GRANTED,\n                expires: 'never',\n                canAskAgain: true,\n                granted: true\n              };\n            }\n          }\n        }\n        break;\n      default:\n        break;\n    }\n    return {\n      status: PermissionStatus.UNDETERMINED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: false\n    };\n  })).apply(this, arguments);\n}\nexport default {\n  get name() {\n    return 'ExpoPermissions';\n  },\n  getAsync: function getAsync(_x6) {\n    return (_getAsync = _getAsync || _asyncToGenerator(function* (permissionTypes) {\n      var results = {};\n      for (var permissionType of new Set(permissionTypes)) {\n        results[permissionType] = yield getPermissionAsync(permissionType, false);\n      }\n      return results;\n    })).apply(this, arguments);\n  },\n  askAsync: function askAsync(_x7) {\n    return (_askAsync = _askAsync || _asyncToGenerator(function* (permissionTypes) {\n      var results = {};\n      for (var permissionType of new Set(permissionTypes)) {\n        results[permissionType] = yield getPermissionAsync(permissionType, true);\n      }\n      return results;\n    })).apply(this, arguments);\n  }\n};\nexport function getRequestMotionPermission() {\n  var _DeviceMotionEvent;\n  if (typeof DeviceMotionEvent !== 'undefined' && !!((_DeviceMotionEvent = DeviceMotionEvent) != null && _DeviceMotionEvent.requestPermission)) {\n    return DeviceMotionEvent.requestPermission;\n  }\n  return null;\n}\nfunction isIOS() {\n  var isIOSUA = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n  var isIE11 = !!window['MSStream'];\n  return isIOSUA && !isIE11;\n}","map":{"version":3,"names":["PermissionStatus","_getUserMedia","constraints","navigator","mediaDevices","getUserMedia","webkitGetUserMedia","mozGetUserMedia","error","Error","code","name","Promise","resolve","reject","call","askForMediaPermissionAsync","_x","_askForMediaPermissionAsync","_asyncToGenerator","options","status","GRANTED","expires","canAskAgain","granted","_ref","message","UNDETERMINED","DENIED","apply","arguments","askForMicrophonePermissionAsync","_askForMicrophonePermissionAsync","audio","askForCameraPermissionAsync","_askForCameraPermissionAsync","video","askForLocationPermissionAsync","_askForLocationPermissionAsync","geolocation","getCurrentPosition","_ref2","getPermissionWithQueryAsync","_x2","_getPermissionWithQueryAsync","permissions","query","_yield$navigator$perm","state","enumerateDevices","_enumerateDevices","window","MediaStreamTrack","getSources","askSensorPermissionAsync","_askSensorPermissionAsync","requestPermission","getRequestMotionPermission","getMediaMaybeGrantedAsync","_x3","_getMediaMaybeGrantedAsync","targetKind","devices","result","filter","_ref3","kind","some","_ref4","label","getPermissionAsync","_x4","_x5","_getPermissionAsync","permission","shouldAsk","_window","_window$Notification","Notification","isIOS","maybeStatus","maybeGranted","getAsync","_x6","_getAsync","permissionTypes","results","permissionType","Set","askAsync","_x7","_askAsync","_DeviceMotionEvent","DeviceMotionEvent","isIOSUA","test","userAgent","isIE11"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/node_modules/expo-permissions/src/ExpoPermissions.web.ts"],"sourcesContent":["import {\n  PermissionMap,\n  PermissionType,\n  PermissionStatus,\n  PermissionInfo,\n} from './Permissions.types';\n\n/*\n * TODO: Bacon: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Permissions\n * Add messages to manifest like we do with iOS info.plist\n */\n\n// https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Using_the_new_API_in_older_browsers\n// Older browsers might not implement mediaDevices at all, so we set an empty object first\nfunction _getUserMedia(constraints: MediaStreamConstraints): Promise<MediaStream> {\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    return navigator.mediaDevices.getUserMedia(constraints);\n  }\n\n  // Some browsers partially implement mediaDevices. We can't just assign an object\n  // with getUserMedia as it would overwrite existing properties.\n  // Here, we will just add the getUserMedia property if it's missing.\n\n  // First get ahold of the legacy getUserMedia, if present\n  const getUserMedia =\n    // TODO: this method is deprecated, migrate to https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n    navigator.getUserMedia ||\n    navigator.webkitGetUserMedia ||\n    navigator.mozGetUserMedia ||\n    function () {\n      const error: any = new Error('Permission unimplemented');\n      error.code = 0;\n      error.name = 'NotAllowedError';\n      throw error;\n    };\n\n  return new Promise((resolve, reject) => {\n    getUserMedia.call(navigator, constraints, resolve, reject);\n  });\n}\n\nasync function askForMediaPermissionAsync(\n  options: MediaStreamConstraints\n): Promise<PermissionInfo> {\n  try {\n    await _getUserMedia(options);\n    return {\n      status: PermissionStatus.GRANTED,\n      expires: 'never',\n      canAskAgain: true,\n      granted: true,\n    };\n  } catch ({ message }) {\n    // name: NotAllowedError\n    // code: 0\n    if (message === 'Permission dismissed') {\n      // message: Permission dismissed\n      return {\n        status: PermissionStatus.UNDETERMINED,\n        expires: 'never',\n        canAskAgain: true,\n        granted: false,\n      };\n    } else {\n      // TODO: Bacon: [OSX] The system could deny access to chrome.\n      // TODO: Bacon: add: { status: 'unimplemented' }\n      // message: Permission denied\n      return {\n        status: PermissionStatus.DENIED,\n        expires: 'never',\n        canAskAgain: true,\n        granted: false,\n      };\n    }\n  }\n}\n\nasync function askForMicrophonePermissionAsync(): Promise<PermissionInfo> {\n  return await askForMediaPermissionAsync({ audio: true });\n}\n\nasync function askForCameraPermissionAsync(): Promise<PermissionInfo> {\n  return await askForMediaPermissionAsync({ video: true });\n}\n\nasync function askForLocationPermissionAsync(): Promise<PermissionInfo> {\n  return new Promise((resolve) => {\n    navigator.geolocation.getCurrentPosition(\n      () =>\n        resolve({\n          status: PermissionStatus.GRANTED,\n          expires: 'never',\n          canAskAgain: true,\n          granted: true,\n        }),\n      ({ code }: GeolocationPositionError) => {\n        // https://developer.mozilla.org/en-US/docs/Web/API/PositionError/code\n        if (code === 1) {\n          resolve({\n            status: PermissionStatus.DENIED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: false,\n          });\n        } else {\n          resolve({\n            status: PermissionStatus.UNDETERMINED,\n            expires: 'never',\n            canAskAgain: true,\n            granted: false,\n          });\n        }\n      }\n    );\n  });\n}\n\nasync function getPermissionWithQueryAsync(\n  name: PermissionNameWithAdditionalValues\n): Promise<PermissionStatus | null> {\n  if (!navigator || !navigator.permissions || !navigator.permissions.query) return null;\n\n  const { state } = await navigator.permissions.query({ name });\n  if (state === 'prompt') {\n    return PermissionStatus.UNDETERMINED;\n  } else if (state === 'granted') {\n    return PermissionStatus.GRANTED;\n  } else if (state === 'denied') {\n    return PermissionStatus.DENIED;\n  }\n  return null;\n}\n\nasync function enumerateDevices(): Promise<MediaDeviceInfo[] | null> {\n  if (navigator && navigator.mediaDevices && navigator.mediaDevices.enumerateDevices) {\n    return await navigator.mediaDevices.enumerateDevices();\n  }\n\n  // @ts-ignore: This is deprecated but we should still attempt to use it.\n  if (window.MediaStreamTrack && typeof window.MediaStreamTrack.getSources === 'function') {\n    // @ts-ignore\n    return await MediaStreamTrack.getSources();\n  }\n  return null;\n}\n\nasync function askSensorPermissionAsync(): Promise<PermissionStatus> {\n  const requestPermission = getRequestMotionPermission();\n  // Technically this is incorrect because it doesn't account for iOS 12.2 Safari.\n  // But unfortunately we can only abstract so much.\n  if (!requestPermission) return PermissionStatus.GRANTED;\n\n  // If this isn't invoked in a touch-event then it never resolves.\n  // Safari probably should throw an error but because it doesn't we have no way of informing the developer.\n  const status = await requestPermission();\n  switch (status) {\n    case 'granted':\n      return PermissionStatus.GRANTED;\n    case 'denied':\n      return PermissionStatus.DENIED;\n    default:\n      return PermissionStatus.UNDETERMINED;\n  }\n}\n\nasync function getMediaMaybeGrantedAsync(targetKind: MediaDeviceKind): Promise<boolean> {\n  const devices = await enumerateDevices();\n  if (!devices) {\n    return false;\n  }\n  const result = await devices\n    .filter(({ kind }) => kind === targetKind)\n    .some(({ label }) => label !== '');\n  // Granted or denied or undetermined or no devices\n  return result;\n}\n\nasync function getPermissionAsync(\n  permission: PermissionType,\n  shouldAsk: boolean\n): Promise<PermissionInfo> {\n  switch (permission) {\n    case 'userFacingNotifications':\n    case 'notifications':\n      {\n        if (!shouldAsk) {\n          const status = await getPermissionWithQueryAsync('notifications');\n          if (status) {\n            return {\n              status,\n              expires: 'never',\n              granted: status === PermissionStatus.GRANTED,\n              canAskAgain: true,\n            };\n          }\n        }\n\n        const { Notification = {} } = window as any;\n        if (Notification.requestPermission) {\n          let status = Notification.permission;\n          if (shouldAsk) {\n            status = await Notification.requestPermission();\n          }\n          if (!status || status === 'default') {\n            return {\n              status: PermissionStatus.UNDETERMINED,\n              expires: 'never',\n              canAskAgain: true,\n              granted: false,\n            };\n          }\n          return {\n            status,\n            expires: 'never',\n            canAskAgain: true,\n            granted: status === PermissionStatus.GRANTED,\n          };\n        }\n      }\n      break;\n    case 'motion': {\n      if (shouldAsk) {\n        const status = await askSensorPermissionAsync();\n        return {\n          status,\n          expires: 'never',\n          granted: status === PermissionStatus.GRANTED,\n          canAskAgain: false,\n        };\n      }\n\n      // We can infer from the requestor if this is an older browser.\n      const status = getRequestMotionPermission()\n        ? PermissionStatus.UNDETERMINED\n        : isIOS()\n        ? PermissionStatus.DENIED\n        : PermissionStatus.GRANTED;\n      return {\n        status,\n        expires: 'never',\n        canAskAgain: true,\n        granted: status === PermissionStatus.GRANTED,\n      };\n    }\n    case 'location':\n    case 'locationForeground':\n    case 'locationBackground':\n      {\n        const maybeStatus = await getPermissionWithQueryAsync('geolocation');\n        if (maybeStatus) {\n          if (maybeStatus === PermissionStatus.UNDETERMINED && shouldAsk) {\n            return await askForLocationPermissionAsync();\n          }\n          return {\n            status: maybeStatus,\n            expires: 'never',\n            canAskAgain: true,\n            granted: maybeStatus === PermissionStatus.GRANTED,\n          };\n        } else if (shouldAsk) {\n          // TODO: Bacon: should this function as ask async when not in chrome?\n          return await askForLocationPermissionAsync();\n        }\n      }\n      break;\n    case 'audioRecording':\n      {\n        const maybeStatus = await getPermissionWithQueryAsync('microphone');\n        if (maybeStatus) {\n          if (maybeStatus === PermissionStatus.UNDETERMINED && shouldAsk) {\n            return await askForMicrophonePermissionAsync();\n          }\n          return {\n            status: maybeStatus,\n            expires: 'never',\n            canAskAgain: true,\n            granted: maybeStatus === PermissionStatus.GRANTED,\n          };\n        } else if (shouldAsk) {\n          return await askForMicrophonePermissionAsync();\n        } else {\n          const maybeGranted = await getMediaMaybeGrantedAsync('audioinput');\n          if (maybeGranted) {\n            return {\n              status: PermissionStatus.GRANTED,\n              expires: 'never',\n              canAskAgain: true,\n              granted: true,\n            };\n          }\n          // TODO: Bacon: Get denied or undetermined...\n        }\n      }\n      break;\n    case 'camera':\n      {\n        const maybeStatus = await getPermissionWithQueryAsync('camera');\n        if (maybeStatus) {\n          if (maybeStatus === PermissionStatus.UNDETERMINED && shouldAsk) {\n            return await askForCameraPermissionAsync();\n          }\n          return {\n            status: maybeStatus,\n            expires: 'never',\n            canAskAgain: true,\n            granted: maybeStatus === PermissionStatus.GRANTED,\n          };\n        } else if (shouldAsk) {\n          return await askForCameraPermissionAsync();\n        } else {\n          const maybeGranted = await getMediaMaybeGrantedAsync('videoinput');\n          if (maybeGranted) {\n            return {\n              status: PermissionStatus.GRANTED,\n              expires: 'never',\n              canAskAgain: true,\n              granted: true,\n            };\n          }\n          // TODO: Bacon: Get denied or undetermined...\n        }\n      }\n      break;\n    default:\n      break;\n  }\n  return {\n    status: PermissionStatus.UNDETERMINED,\n    expires: 'never',\n    canAskAgain: true,\n    granted: false,\n  };\n}\n\nexport default {\n  get name(): string {\n    return 'ExpoPermissions';\n  },\n\n  async getAsync(permissionTypes: PermissionType[]): Promise<PermissionMap> {\n    const results = {};\n    for (const permissionType of new Set(permissionTypes)) {\n      results[permissionType] = await getPermissionAsync(permissionType, /* shouldAsk */ false);\n    }\n    return results;\n  },\n\n  async askAsync(permissionTypes: PermissionType[]): Promise<PermissionMap> {\n    const results = {};\n    for (const permissionType of new Set(permissionTypes)) {\n      results[permissionType] = await getPermissionAsync(permissionType, /* shouldAsk */ true);\n    }\n    return results;\n  },\n};\n\n/**\n * Temporary solution until `tslib.d.ts` is updated to include the new DeviceMotion API.\n * `typescript@4.4.4` is missing `requestPermission` described in https://w3c.github.io/deviceorientation/#devicemotion\n * MDN docs do not describe this property as well https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent\n */\ndeclare let DeviceMotionEvent: {\n  prototype: DeviceMotionEvent;\n  new (type: string, eventInitDict?: DeviceMotionEventInit): DeviceMotionEvent;\n  requestPermission?: () => Promise<PermissionState>;\n};\n\nexport function getRequestMotionPermission(): (() => Promise<PermissionState>) | null {\n  if (typeof DeviceMotionEvent !== 'undefined' && !!DeviceMotionEvent?.requestPermission) {\n    return DeviceMotionEvent.requestPermission;\n  }\n\n  return null;\n}\n\n// https://stackoverflow.com/a/9039885/4047926\nfunction isIOS(): boolean {\n  const isIOSUA = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n  const isIE11 = !!window['MSStream'];\n  return isIOSUA && !isIE11;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}