{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useRef, useState } from 'react';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useRoute } from '@react-navigation/native';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Icons } from \"../../assets\";\nimport { CustomButton, CustomHeader, MoveMoneyCard } from \"../../components\";\nimport { navigationStrings } from \"../../constants\";\nimport { Strings } from \"../../constants/Strings\";\nimport { Colors } from \"../../theme\";\nimport styling from \"./styles\";\nimport { resendOTP, showLoader, verifyOtp } from \"../../redux/actions/user\";\nimport { showMessage } from 'react-native-flash-message';\nimport { save } from \"../../utils/Storage\";\nimport OTPTextView from 'react-native-otp-textinput';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar OTPVerifyLogin = function OTPVerifyLogin(_ref) {\n  var _route$params, _ref2, _ref3, _userDetails$data, _userDetails$data$per, _userDetails$data$per2;\n  var navigation = _ref.navigation;\n  var route = useRoute();\n  var otpInput = useRef(null);\n  var theme = route == null ? void 0 : (_route$params = route.params) == null ? void 0 : _route$params.theme;\n  var styles = styling(theme);\n  var userDetails = useSelector(function (state) {\n    var _state$user;\n    return state == null ? void 0 : (_state$user = state.user) == null ? void 0 : _state$user.login;\n  });\n  var dispatch = useDispatch();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    otp = _useState2[0],\n    setOtp = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    otpError = _useState4[0],\n    setOtpError = _useState4[1];\n  var onLogin = function onLogin() {\n    return (_ref2 = _ref2 || _asyncToGenerator(function* () {\n      if (otp.length === 0) {\n        setOtpError('Please enter otp.');\n      } else {\n        yield dispatch(showLoader(true));\n        var data = {\n          otp: otp\n        };\n        var res = yield verifyOtp(data);\n        yield dispatch(showLoader(false));\n        if ((res == null ? void 0 : res.status) === 0) {\n          showMessage({\n            message: res == null ? void 0 : res.message,\n            type: \"danger\"\n          });\n          yield save('otpVerify', false);\n        } else {\n          yield save('otpVerify', true);\n          navigation.navigate(navigationStrings.BOTTOMTABSNAV);\n        }\n      }\n    })).apply(this, arguments);\n  };\n  var onPressResetPassword = function onPressResetPassword() {\n    return (_ref3 = _ref3 || _asyncToGenerator(function* () {\n      yield dispatch(showLoader(true));\n      var res = yield resendOTP();\n      yield dispatch(showLoader(false));\n      if ((res == null ? void 0 : res.status) === 0) {\n        showMessage({\n          message: res == null ? void 0 : res.message,\n          type: \"danger\"\n        });\n      } else {\n        showMessage({\n          message: \"Please check your mail OTP resend successfully!\",\n          type: \"success\"\n        });\n      }\n    })).apply(this, arguments);\n  };\n  return _jsxs(View, {\n    style: styles.screen,\n    children: [_jsx(CustomHeader, {\n      theme: theme,\n      headerTitle: \"Verification Code\",\n      onPressBack: function onPressBack() {\n        return navigation.goBack();\n      }\n    }), _jsxs(ScrollView, {\n      style: styles.scrollView,\n      children: [_jsxs(Text, {\n        style: styles.errorText1,\n        children: [\"Enter verification code sent to \", (userDetails == null ? void 0 : (_userDetails$data = userDetails.data) == null ? void 0 : (_userDetails$data$per = _userDetails$data.personDetail) == null ? void 0 : (_userDetails$data$per2 = _userDetails$data$per[0]) == null ? void 0 : _userDetails$data$per2.email) || '']\n      }), _jsx(OTPTextView, {\n        autoFocus: true\n      }), (otpError == null ? void 0 : otpError.length) > 0 && _jsx(Text, {\n        style: styles.errorText,\n        children: otpError\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return onPressResetPassword();\n        },\n        children: _jsx(Text, {\n          style: styles.resetPassword,\n          children: \"Resend verification code\"\n        })\n      })]\n    }), _jsx(View, {\n      style: styles.ConfirmParent,\n      children: _jsx(CustomButton, {\n        theme: theme,\n        onBtnPress: function onBtnPress() {\n          return onLogin();\n        },\n        buttonTitle: Strings.confirm,\n        buttonStyle: styles.confirmBtn,\n        buttonTitleStyle: styles.confirmText\n      })\n    })]\n  });\n};\nexport default OTPVerifyLogin;","map":{"version":3,"names":["React","useRef","useState","ScrollView","Text","TouchableOpacity","View","useRoute","useDispatch","useSelector","Icons","CustomButton","CustomHeader","MoveMoneyCard","navigationStrings","Strings","Colors","styling","resendOTP","showLoader","verifyOtp","showMessage","save","OTPTextView","jsx","_jsx","jsxs","_jsxs","OTPVerifyLogin","_ref","_route$params","_ref2","_ref3","_userDetails$data","_userDetails$data$per","_userDetails$data$per2","navigation","route","otpInput","theme","params","styles","userDetails","state","_state$user","user","login","dispatch","_useState","_useState2","_slicedToArray","otp","setOtp","_useState3","_useState4","otpError","setOtpError","onLogin","_asyncToGenerator","length","data","res","status","message","type","navigate","BOTTOMTABSNAV","apply","arguments","onPressResetPassword","style","screen","children","headerTitle","onPressBack","goBack","scrollView","errorText1","personDetail","email","autoFocus","errorText","onPress","resetPassword","ConfirmParent","onBtnPress","buttonTitle","confirm","buttonStyle","confirmBtn","buttonTitleStyle","confirmText"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/src/modules/OTPVerifyLogin/index.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { ScrollView, Text, TouchableOpacity, View } from 'react-native';\nimport { useRoute } from '@react-navigation/native';\n// import OtpInputs from 'react-native-otp-inputs';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Icons } from '../../assets';\nimport { CustomButton, CustomHeader, MoveMoneyCard } from '../../components';\nimport { navigationStrings } from '../../constants';\nimport { Strings } from '../../constants/Strings';\nimport { Colors } from '../../theme';\nimport styling from './styles';\nimport { resendOTP, showLoader, verifyOtp } from '../../redux/actions/user';\nimport { showMessage } from 'react-native-flash-message';\nimport { save } from '../../utils/Storage';\n// import OTPInputView from '@twotalltotems/react-native-otp-input'\nimport OTPTextView from 'react-native-otp-textinput';\n\nconst OTPVerifyLogin = ({ navigation }) => {\n    const route = useRoute();\n    let otpInput = useRef(null);\n    const theme = route?.params?.theme;\n    const styles = styling(theme);\n    const userDetails = useSelector(state => state?.user?.login)\n    const dispatch = useDispatch()\n    const [otp, setOtp] = useState('')\n    const [otpError, setOtpError] = useState('')\n    const onLogin = async () => {\n        if (otp.length === 0) {\n            setOtpError('Please enter otp.')\n        } else {\n            await dispatch(showLoader(true))\n            let data = {\n                otp: otp\n            }\n            let res = await verifyOtp(data)\n            await dispatch(showLoader(false))\n            if (res?.status === 0) {\n                showMessage({\n                    message: res?.message,\n                    type: \"danger\",\n                })\n                await save('otpVerify', false)\n            } else {\n                await save('otpVerify', true)\n                navigation.navigate(navigationStrings.BOTTOMTABSNAV)\n            }\n        }\n    }\n    const onPressResetPassword = async () => {\n        await dispatch(showLoader(true))\n        let res = await resendOTP()\n        await dispatch(showLoader(false))\n        if (res?.status === 0) {\n            showMessage({\n                message: res?.message,\n                type: \"danger\",\n            })\n        } else {\n            showMessage({\n                message: \"Please check your mail OTP resend successfully!\",\n                type: \"success\",\n            })\n        }\n    }\n\n    return (\n        <View style={styles.screen}>\n            <CustomHeader\n                theme={theme}\n                headerTitle={\"Verification Code\"}\n                onPressBack={() => navigation.goBack()}\n            />\n            <ScrollView style={styles.scrollView}>\n                <Text style={styles.errorText1}>\n                    Enter verification code sent to {userDetails?.data?.personDetail?.[0]?.email || ''}\n                </Text>\n                {/* <OTPInputView\n                    style={{ width: '80%', height: 200 }}\n                    pinCount={6}\n                    // code={this.state.code} //You can supply this prop or not. The component will be used as a controlled / uncontrolled component respectively.\n                    // onCodeChanged = {code => { this.setState({code})}}\n                    onCodeChanged={(code) => {\n                        console.log(\"Code\", code)\n                        setOtp(code)\n                        setOtpError('')\n                    }}\n                    code={otp}\n                    autoFocusOnLoad\n                    codeInputFieldStyle={{\n                        width: 30,\n                        height: 45,\n                        borderWidth: 2,\n                        borderBottomWidth: 1,\n                    }}\n                    codeInputHighlightStyle={{\n                        borderColor: \"#03DAC6\",\n                    }}\n                    onCodeFilled={(code => {\n                        console.log(`Code is ${code}, you are good to go!`)\n                    })}\n                    clearInputs={true}\n                /> */}\n\n                {/* <OtpInputs\n                    handleChange={(code) => {\n                        setOtp(code)\n                        setOtpError('')\n                    }}\n\n                    numberOfInputs={6}\n                    autoFocus\n                    inputStyles={{ backgroundColor: 'white', width: 55, height: 70, borderRadius: 8, elevation: 2, margin: 1, fontSize: 20, alignItems: 'center', marginTop: 30, color: '#000' }}\n                    textAlign='center'\n                /> */}\n\n                {/* <otpInput ref={e => (otpInput = e)} > */}\n                <OTPTextView autoFocus={true} />\n                {otpError?.length > 0 && (\n                    <Text style={styles.errorText}>\n                        {otpError}\n                    </Text>\n                )}\n                <TouchableOpacity onPress={() => onPressResetPassword()}>\n                    <Text style={styles.resetPassword}>{\"Resend verification code\"}</Text>\n                </TouchableOpacity>\n            </ScrollView>\n            <View style={styles.ConfirmParent}>\n                <CustomButton\n                    theme={theme}\n                    onBtnPress={() => onLogin()}\n                    buttonTitle={Strings.confirm}\n                    buttonStyle={styles.confirmBtn}\n                    buttonTitleStyle={styles.confirmText}\n                />\n            </View>\n        </View>\n    );\n\n};\n\nexport default OTPVerifyLogin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}