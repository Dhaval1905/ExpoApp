{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mapNodeList = mapNodeList;\nexports.bindChildren = bindChildren;\nexports.translateNode = translateNode;\nexports.translateDocument = translateDocument;\nvar _TTextCtor = require(\"../tree/TTextCtor\");\nvar _TPhrasingCtor = require(\"../tree/TPhrasingCtor\");\nvar _TBlockCtor = require(\"../tree/TBlockCtor\");\nvar _TDocumentImpl = require(\"../tree/TDocumentImpl\");\nvar _domUtils = require(\"../dom/dom-utils\");\nvar _TEmptyCtor = require(\"../tree/TEmptyCtor\");\nfunction mapNodeList(_ref) {\n  var nodeList = _ref.nodeList,\n    parent = _ref.parent,\n    parentStyles = _ref.parentStyles,\n    params = _ref.params;\n  var nextMap = [];\n  for (var i in nodeList) {\n    var child = nodeList[i];\n    var translated = translateNode({\n      node: child,\n      parentStyles: parentStyles,\n      params: params,\n      nodeIndex: Number(i),\n      parent: parent\n    });\n    if (translated) {\n      nextMap.push(translated);\n    }\n  }\n  return nextMap;\n}\nfunction bindChildren(node, children, params) {\n  if (!node.elementModel || !node.elementModel.isOpaque) {\n    node.bindChildren(mapNodeList({\n      nodeList: children,\n      parent: node,\n      params: params\n    }));\n  }\n}\nfunction translateElement(_ref2) {\n  var node = _ref2.node,\n    nodeIndex = _ref2.nodeIndex,\n    params = _ref2.params,\n    parent = _ref2.parent,\n    parentStyles = _ref2.parentStyles;\n  var tagName = node.tagName;\n  var sharedProps = {\n    nodeIndex: nodeIndex,\n    parentStyles: parentStyles,\n    context: params,\n    domNode: node,\n    parent: parent\n  };\n  var elementModel = params.modelRegistry.getElementModelFromTagName(tagName);\n  if (!elementModel) {\n    return new _TEmptyCtor.TEmptyCtor(_objectSpread(_objectSpread({}, sharedProps), {}, {\n      isUnregistered: true,\n      elementModel: elementModel,\n      domNode: node\n    }));\n  }\n  if (elementModel.isTranslatableTextual()) {\n    if (node.children.length === 1) {\n      var child = node.children[0];\n      if ((0, _domUtils.isDomText)(child)) {\n        return new _TTextCtor.TTextCtor(_objectSpread(_objectSpread({}, sharedProps), {}, {\n          elementModel: elementModel,\n          textNode: child,\n          domNode: node\n        }));\n      }\n    } else if (node.children.length === 0) {\n      return new _TTextCtor.TTextCtor(_objectSpread(_objectSpread({}, sharedProps), {}, {\n        elementModel: elementModel,\n        domNode: node,\n        textNode: new _domUtils.Text('')\n      }));\n    }\n    var phrasing = new _TPhrasingCtor.TPhrasingCtor(_objectSpread(_objectSpread({}, sharedProps), {}, {\n      domNode: node,\n      elementModel: elementModel\n    }));\n    bindChildren(phrasing, node.children, params);\n    return phrasing;\n  }\n  if (elementModel.isTranslatableBlock()) {\n    var block = new _TBlockCtor.TBlockCtor(_objectSpread(_objectSpread({}, sharedProps), {}, {\n      elementModel: elementModel,\n      parentStyles: parentStyles,\n      domNode: node\n    }));\n    bindChildren(block, node.children, params);\n    return block;\n  }\n  return new _TEmptyCtor.TEmptyCtor(_objectSpread(_objectSpread({}, sharedProps), {}, {\n    isUnregistered: false,\n    elementModel: elementModel,\n    domNode: node\n  }));\n}\nfunction translateNode(_ref3) {\n  var node = _ref3.node,\n    parentStyles = _ref3.parentStyles,\n    params = _ref3.params,\n    nodeIndex = _ref3.nodeIndex,\n    parent = _ref3.parent;\n  if ((0, _domUtils.isDomText)(node)) {\n    return new _TTextCtor.TTextCtor({\n      textNode: node,\n      context: params,\n      parentStyles: parentStyles,\n      domNode: null,\n      elementModel: null,\n      nodeIndex: nodeIndex,\n      parent: parent\n    });\n  }\n  if ((0, _domUtils.isDomElement)(node)) {\n    return translateElement({\n      node: node,\n      parentStyles: parentStyles,\n      params: params,\n      nodeIndex: nodeIndex,\n      parent: parent\n    });\n  }\n  return null;\n}\nfunction translateDocument(document, params) {\n  var tdoc = new _TDocumentImpl.TDocumentCtor({\n    context: params,\n    styles: params.baseStyles,\n    domNode: document\n  });\n  bindChildren(tdoc, document.children, params);\n  tdoc.parseChildren();\n  return tdoc;\n}","map":{"version":3,"names":["_TTextCtor","require","_TPhrasingCtor","_TBlockCtor","_TDocumentImpl","_domUtils","_TEmptyCtor","mapNodeList","_ref","nodeList","parent","parentStyles","params","nextMap","i","child","translated","translateNode","node","nodeIndex","Number","push","bindChildren","children","elementModel","isOpaque","translateElement","_ref2","tagName","sharedProps","context","domNode","modelRegistry","getElementModelFromTagName","TEmptyCtor","_objectSpread","isUnregistered","isTranslatableTextual","length","isDomText","TTextCtor","textNode","Text","phrasing","TPhrasingCtor","isTranslatableBlock","block","TBlockCtor","_ref3","isDomElement","translateDocument","document","tdoc","TDocumentCtor","styles","baseStyles","parseChildren"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/node_modules/react-native-render-html/node_modules/@native-html/transient-render-engine/lib/commonjs/flow/translate.ts"],"sourcesContent":["import { TNodeImpl, TNodeInit } from '../tree/tree-types';\nimport { Document } from 'domhandler';\nimport { TTextCtor } from '../tree/TTextCtor';\nimport { TPhrasingCtor } from '../tree/TPhrasingCtor';\nimport { TBlockCtor } from '../tree/TBlockCtor';\nimport { TDocumentCtor, TDocumentImpl } from '../tree/TDocumentImpl';\nimport { isDomElement, isDomText, Element, Node, Text } from '../dom/dom-utils';\nimport { TStyles } from '../styles/TStyles';\n\nimport { TEmptyCtor } from '../tree/TEmptyCtor';\nimport { DataFlowParams } from './types';\n\nexport function mapNodeList({\n  nodeList,\n  parent,\n  parentStyles,\n  params\n}: {\n  nodeList: Node[];\n  parentStyles?: TStyles;\n  parent: TNodeImpl | null;\n  params: DataFlowParams;\n}): TNodeImpl[] {\n  const nextMap: TNodeImpl[] = [];\n  for (const i in nodeList) {\n    const child = nodeList[i];\n    const translated = translateNode({\n      node: child,\n      parentStyles,\n      params,\n      nodeIndex: Number(i),\n      parent\n    });\n    if (translated) {\n      nextMap.push(translated);\n    }\n  }\n  return nextMap;\n}\n\nexport function bindChildren(\n  node: TNodeImpl,\n  children: Node[],\n  params: DataFlowParams\n) {\n  if (!node.elementModel || !node.elementModel.isOpaque) {\n    node.bindChildren(\n      mapNodeList({\n        nodeList: children,\n        parent: node,\n        params\n      })\n    );\n  }\n}\n\nfunction translateElement({\n  node,\n  nodeIndex,\n  params,\n  parent,\n  parentStyles\n}: TranslateParams<Element>): TNodeImpl | null {\n  const tagName = node.tagName;\n  const sharedProps: Omit<TNodeInit, 'contentModel' | 'elementModel'> = {\n    nodeIndex,\n    parentStyles,\n    context: params,\n    domNode: node,\n    parent\n  };\n  const elementModel = params.modelRegistry.getElementModelFromTagName(tagName);\n  if (!elementModel) {\n    return new TEmptyCtor({\n      ...sharedProps,\n      isUnregistered: true,\n      elementModel,\n      domNode: node\n    });\n  }\n  if (elementModel.isTranslatableTextual()) {\n    if (node.children.length === 1) {\n      const child = node.children[0] as Node;\n      if (isDomText(child)) {\n        return new TTextCtor({\n          ...sharedProps,\n          elementModel,\n          textNode: child,\n          domNode: node\n        });\n      }\n    } else if (node.children.length === 0) {\n      return new TTextCtor({\n        ...sharedProps,\n        elementModel,\n        domNode: node,\n        textNode: new Text('')\n      });\n    }\n    const phrasing = new TPhrasingCtor({\n      ...sharedProps,\n      domNode: node,\n      elementModel\n    });\n    bindChildren(phrasing, node.children, params);\n    return phrasing;\n  }\n  if (elementModel.isTranslatableBlock()) {\n    const block = new TBlockCtor({\n      ...sharedProps,\n      elementModel,\n      parentStyles,\n      domNode: node\n    });\n    bindChildren(block, node.children, params);\n    return block;\n  }\n  return new TEmptyCtor({\n    ...sharedProps,\n    isUnregistered: false,\n    elementModel,\n    domNode: node\n  });\n}\n\ninterface TranslateParams<T = Node> {\n  node: T;\n  params: DataFlowParams;\n  parent: TNodeImpl | null;\n  parentStyles?: TStyles;\n  nodeIndex?: number;\n}\n\nexport function translateNode({\n  node,\n  parentStyles,\n  params,\n  nodeIndex,\n  parent\n}: TranslateParams<Node | null>): TNodeImpl | null {\n  if (isDomText(node)) {\n    return new TTextCtor({\n      textNode: node,\n      context: params,\n      parentStyles,\n      domNode: null,\n      elementModel: null,\n      nodeIndex,\n      parent\n    });\n  }\n  if (isDomElement(node)) {\n    return translateElement({\n      node,\n      parentStyles,\n      params,\n      nodeIndex,\n      parent\n    });\n  }\n  return null;\n}\n\nexport function translateDocument(\n  document: Document,\n  params: DataFlowParams\n): TDocumentImpl {\n  const tdoc = new TDocumentCtor({\n    context: params,\n    styles: params.baseStyles,\n    domNode: document as any\n  });\n  bindChildren(tdoc, document.children, params);\n  tdoc.parseChildren();\n  return tdoc;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}