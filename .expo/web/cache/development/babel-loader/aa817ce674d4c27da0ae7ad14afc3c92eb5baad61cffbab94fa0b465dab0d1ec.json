{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useRoute } from '@react-navigation/native';\nimport React, { useState } from 'react';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport OtpInputs from 'react-native-otp-inputs';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Icons } from \"../../assets\";\nimport { CustomButton, CustomHeader, MoveMoneyCard } from \"../../components\";\nimport { navigationStrings } from \"../../constants\";\nimport { Strings } from \"../../constants/Strings\";\nimport { Colors } from \"../../theme\";\nimport styling from \"./styles\";\nimport { resendOTP, showLoader, verifyOtp } from \"../../redux/actions/user\";\nimport { showMessage } from 'react-native-flash-message';\nimport { save } from \"../../utils/Storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar OTPVerifyLogin = function OTPVerifyLogin(_ref) {\n  var _route$params, _ref2, _ref3, _userDetails$data, _userDetails$data$per, _userDetails$data$per2;\n  var navigation = _ref.navigation;\n  var route = useRoute();\n  var theme = route == null ? void 0 : (_route$params = route.params) == null ? void 0 : _route$params.theme;\n  var styles = styling(theme);\n  var userDetails = useSelector(function (state) {\n    var _state$user;\n    return state == null ? void 0 : (_state$user = state.user) == null ? void 0 : _state$user.login;\n  });\n  var dispatch = useDispatch();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    otp = _useState2[0],\n    setOtp = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    otpError = _useState4[0],\n    setOtpError = _useState4[1];\n  var onLogin = function onLogin() {\n    return (_ref2 = _ref2 || _asyncToGenerator(function* () {\n      if (otp.length === 0) {\n        setOtpError('Please enter otp.');\n      } else {\n        yield dispatch(showLoader(true));\n        var data = {\n          otp: otp\n        };\n        var res = yield verifyOtp(data);\n        yield dispatch(showLoader(false));\n        if ((res == null ? void 0 : res.status) === 0) {\n          showMessage({\n            message: res == null ? void 0 : res.message,\n            type: \"danger\"\n          });\n          yield save('otpVerify', false);\n        } else {\n          yield save('otpVerify', true);\n          navigation.navigate(navigationStrings.BOTTOMTABSNAV);\n        }\n      }\n    })).apply(this, arguments);\n  };\n  var onPressResetPassword = function onPressResetPassword() {\n    return (_ref3 = _ref3 || _asyncToGenerator(function* () {\n      yield dispatch(showLoader(true));\n      var res = yield resendOTP();\n      yield dispatch(showLoader(false));\n      if ((res == null ? void 0 : res.status) === 0) {\n        showMessage({\n          message: res == null ? void 0 : res.message,\n          type: \"danger\"\n        });\n      } else {\n        showMessage({\n          message: \"Please check your mail OTP resend successfully!\",\n          type: \"success\"\n        });\n      }\n    })).apply(this, arguments);\n  };\n  return _jsxs(View, {\n    style: styles.screen,\n    children: [_jsx(CustomHeader, {\n      theme: theme,\n      headerTitle: \"Verification Code\",\n      onPressBack: function onPressBack() {\n        return navigation.goBack();\n      }\n    }), _jsxs(ScrollView, {\n      style: styles.scrollView,\n      children: [_jsxs(Text, {\n        style: styles.errorText1,\n        children: [\"Enter verification code sent to \", (userDetails == null ? void 0 : (_userDetails$data = userDetails.data) == null ? void 0 : (_userDetails$data$per = _userDetails$data.personDetail) == null ? void 0 : (_userDetails$data$per2 = _userDetails$data$per[0]) == null ? void 0 : _userDetails$data$per2.email) || '']\n      }), _jsx(OtpInputs, {\n        handleChange: function handleChange(code) {\n          setOtp(code);\n          setOtpError('');\n        },\n        numberOfInputs: 6,\n        autoFocus: true,\n        inputStyles: {\n          backgroundColor: 'white',\n          width: 55,\n          height: 70,\n          borderRadius: 8,\n          elevation: 2,\n          margin: 1,\n          fontSize: 20,\n          alignItems: 'center',\n          marginTop: 30,\n          color: '#000'\n        },\n        textAlign: \"center\"\n      }), (otpError == null ? void 0 : otpError.length) > 0 && _jsx(Text, {\n        style: styles.errorText,\n        children: otpError\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return onPressResetPassword();\n        },\n        children: _jsx(Text, {\n          style: styles.resetPassword,\n          children: \"Resend verification code\"\n        })\n      })]\n    }), _jsx(View, {\n      style: styles.ConfirmParent,\n      children: _jsx(CustomButton, {\n        theme: theme,\n        onBtnPress: function onBtnPress() {\n          return onLogin();\n        },\n        buttonTitle: Strings.confirm,\n        buttonStyle: styles.confirmBtn,\n        buttonTitleStyle: styles.confirmText\n      })\n    })]\n  });\n};\nexport default OTPVerifyLogin;","map":{"version":3,"names":["useRoute","React","useState","ScrollView","Text","TouchableOpacity","View","OtpInputs","useDispatch","useSelector","Icons","CustomButton","CustomHeader","MoveMoneyCard","navigationStrings","Strings","Colors","styling","resendOTP","showLoader","verifyOtp","showMessage","save","jsx","_jsx","jsxs","_jsxs","OTPVerifyLogin","_ref","_route$params","_ref2","_ref3","_userDetails$data","_userDetails$data$per","_userDetails$data$per2","navigation","route","theme","params","styles","userDetails","state","_state$user","user","login","dispatch","_useState","_useState2","_slicedToArray","otp","setOtp","_useState3","_useState4","otpError","setOtpError","onLogin","_asyncToGenerator","length","data","res","status","message","type","navigate","BOTTOMTABSNAV","apply","arguments","onPressResetPassword","style","screen","children","headerTitle","onPressBack","goBack","scrollView","errorText1","personDetail","email","handleChange","code","numberOfInputs","autoFocus","inputStyles","backgroundColor","width","height","borderRadius","elevation","margin","fontSize","alignItems","marginTop","color","textAlign","errorText","onPress","resetPassword","ConfirmParent","onBtnPress","buttonTitle","confirm","buttonStyle","confirmBtn","buttonTitleStyle","confirmText"],"sources":["/Users/dhavalpatel/Documents/ExpoApp/src/modules/OTPVerifyLogin/index.js"],"sourcesContent":["import { useRoute } from '@react-navigation/native';\nimport React, { useState } from 'react';\nimport { ScrollView, Text, TouchableOpacity, View } from 'react-native';\nimport OtpInputs from 'react-native-otp-inputs';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Icons } from '../../assets';\nimport { CustomButton, CustomHeader, MoveMoneyCard } from '../../components';\nimport { navigationStrings } from '../../constants';\nimport { Strings } from '../../constants/Strings';\nimport { Colors } from '../../theme';\nimport styling from './styles';\nimport { resendOTP, showLoader, verifyOtp } from '../../redux/actions/user';\nimport { showMessage } from 'react-native-flash-message';\nimport { save } from '../../utils/Storage';\n\nconst OTPVerifyLogin = ({ navigation }) => {\n    const route = useRoute();\n    const theme = route?.params?.theme;\n    const styles = styling(theme);\n    const userDetails = useSelector(state => state?.user?.login)\n    const dispatch = useDispatch()\n    const [otp, setOtp] = useState('')\n    const [otpError, setOtpError] = useState('')\n    const onLogin = async() => {\n        if (otp.length === 0) {\n            setOtpError('Please enter otp.')\n        } else {\n        await dispatch(showLoader(true))\n            let data={\n                otp:otp\n            }\n            let res=await verifyOtp(data)\n        await dispatch(showLoader(false))\n            if(res?.status===0){\n                showMessage({\n                    message:res?.message,\n                    type: \"danger\",\n                })\n               await save('otpVerify',false)\n            }else{\n               await save('otpVerify',true)\n            navigation.navigate(navigationStrings.BOTTOMTABSNAV)\n            }\n        }\n    }\n    const onPressResetPassword=async()=>{\n        await dispatch(showLoader(true))\n        let res=await resendOTP()\n        await dispatch(showLoader(false))\n        if(res?.status===0){\n            showMessage({\n                message:res?.message,\n                type: \"danger\",\n            })\n        }else{\n            showMessage({\n                message:\"Please check your mail OTP resend successfully!\",\n                type: \"success\",\n            })\n        }\n    }\n    return (\n        <View style={styles.screen}>\n            <CustomHeader\n                theme={theme}\n                headerTitle={\"Verification Code\"}\n                onPressBack={() => navigation.goBack()}\n            />\n            <ScrollView style={styles.scrollView}>\n            <Text style={styles.errorText1}>\n            Enter verification code sent to {userDetails?.data?.personDetail?.[0]?.email || ''} \n                    </Text>\n                <OtpInputs\n                    handleChange={(code) => {\n                        setOtp(code)\n                        setOtpError('')\n                    }}\n\n                    numberOfInputs={6}\n                    autoFocus\n                    inputStyles={{ backgroundColor: 'white', width: 55, height: 70, borderRadius: 8, elevation: 2, margin: 1, fontSize: 20, alignItems: 'center', marginTop: 30,color:'#000' }}\n                    textAlign='center'\n                />\n                {otpError?.length > 0 && (\n                    <Text style={styles.errorText}>\n                        {otpError}\n                    </Text>\n                )}\n                <TouchableOpacity onPress={()=>onPressResetPassword()}>\n            <Text style={styles.resetPassword}>{\"Resend verification code\"}</Text>\n          </TouchableOpacity>\n            </ScrollView>\n            <View style={styles.ConfirmParent}>\n                <CustomButton\n                    theme={theme}\n                    onBtnPress={() => onLogin()}\n                    buttonTitle={Strings.confirm}\n                    buttonStyle={styles.confirmBtn}\n                    buttonTitleStyle={styles.confirmText}\n                />\n            </View>\n        </View>\n    );\n};\n\nexport default OTPVerifyLogin;\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,0BAA0B;AACnD,OAAOC,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,UAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,gBAAA;AAAA,OAAAC,IAAA;AAExC,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,KAAK;AACd,SAASC,YAAY,EAAEC,YAAY,EAAEC,aAAa;AAClD,SAASC,iBAAiB;AAC1B,SAASC,OAAO;AAChB,SAASC,MAAM;AACf,OAAOC,OAAO;AACd,SAASC,SAAS,EAAEC,UAAU,EAAEC,SAAS;AACzC,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,IAAI;AAA8B,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE3C,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAAC,IAAA,EAAuB;EAAA,IAAAC,aAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,iBAAA,EAAAC,qBAAA,EAAAC,sBAAA;EAAA,IAAjBC,UAAU,GAAAP,IAAA,CAAVO,UAAU;EAChC,IAAMC,KAAK,GAAGpC,QAAQ,CAAC,CAAC;EACxB,IAAMqC,KAAK,GAAGD,KAAK,qBAAAP,aAAA,GAALO,KAAK,CAAEE,MAAM,qBAAbT,aAAA,CAAeQ,KAAK;EAClC,IAAME,MAAM,GAAGtB,OAAO,CAACoB,KAAK,CAAC;EAC7B,IAAMG,WAAW,GAAG/B,WAAW,CAAC,UAAAgC,KAAK;IAAA,IAAAC,WAAA;IAAA,OAAID,KAAK,qBAAAC,WAAA,GAALD,KAAK,CAAEE,IAAI,qBAAXD,WAAA,CAAaE,KAAK;EAAA,EAAC;EAC5D,IAAMC,QAAQ,GAAGrC,WAAW,CAAC,CAAC;EAC9B,IAAAsC,SAAA,GAAsB5C,QAAQ,CAAC,EAAE,CAAC;IAAA6C,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA3BG,GAAG,GAAAF,UAAA;IAAEG,MAAM,GAAAH,UAAA;EAClB,IAAAI,UAAA,GAAgCjD,QAAQ,CAAC,EAAE,CAAC;IAAAkD,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAC5B,IAAMG,OAAO,YAAPA,OAAOA,CAAA;IAAA,QAAAzB,KAAA,GAAAA,KAAA,IAAA0B,iBAAA,CAAG,aAAW;MACvB,IAAIP,GAAG,CAACQ,MAAM,KAAK,CAAC,EAAE;QAClBH,WAAW,CAAC,mBAAmB,CAAC;MACpC,CAAC,MAAM;QACP,MAAMT,QAAQ,CAAC1B,UAAU,CAAC,IAAI,CAAC,CAAC;QAC5B,IAAIuC,IAAI,GAAC;UACLT,GAAG,EAACA;QACR,CAAC;QACD,IAAIU,GAAG,SAAOvC,SAAS,CAACsC,IAAI,CAAC;QACjC,MAAMb,QAAQ,CAAC1B,UAAU,CAAC,KAAK,CAAC,CAAC;QAC7B,IAAG,CAAAwC,GAAG,oBAAHA,GAAG,CAAEC,MAAM,MAAG,CAAC,EAAC;UACfvC,WAAW,CAAC;YACRwC,OAAO,EAACF,GAAG,oBAAHA,GAAG,CAAEE,OAAO;YACpBC,IAAI,EAAE;UACV,CAAC,CAAC;UACH,MAAMxC,IAAI,CAAC,WAAW,EAAC,KAAK,CAAC;QAChC,CAAC,MAAI;UACF,MAAMA,IAAI,CAAC,WAAW,EAAC,IAAI,CAAC;UAC/Ba,UAAU,CAAC4B,QAAQ,CAACjD,iBAAiB,CAACkD,aAAa,CAAC;QACpD;MACJ;IACJ,CAAC,GAAAC,KAAA,OAAAC,SAAA;EAAA;EACD,IAAMC,oBAAoB,YAApBA,oBAAoBA,CAAA;IAAA,QAAApC,KAAA,GAAAA,KAAA,IAAAyB,iBAAA,CAAC,aAAS;MAChC,MAAMX,QAAQ,CAAC1B,UAAU,CAAC,IAAI,CAAC,CAAC;MAChC,IAAIwC,GAAG,SAAOzC,SAAS,CAAC,CAAC;MACzB,MAAM2B,QAAQ,CAAC1B,UAAU,CAAC,KAAK,CAAC,CAAC;MACjC,IAAG,CAAAwC,GAAG,oBAAHA,GAAG,CAAEC,MAAM,MAAG,CAAC,EAAC;QACfvC,WAAW,CAAC;UACRwC,OAAO,EAACF,GAAG,oBAAHA,GAAG,CAAEE,OAAO;UACpBC,IAAI,EAAE;QACV,CAAC,CAAC;MACN,CAAC,MAAI;QACDzC,WAAW,CAAC;UACRwC,OAAO,EAAC,iDAAiD;UACzDC,IAAI,EAAE;QACV,CAAC,CAAC;MACN;IACJ,CAAC,GAAAG,KAAA,OAAAC,SAAA;EAAA;EACD,OACIxC,KAAA,CAACpB,IAAI;IAAC8D,KAAK,EAAE7B,MAAM,CAAC8B,MAAO;IAAAC,QAAA,GACvB9C,IAAA,CAACZ,YAAY;MACTyB,KAAK,EAAEA,KAAM;MACbkC,WAAW,EAAE,mBAAoB;MACjCC,WAAW,EAAE,SAAAA,YAAA;QAAA,OAAMrC,UAAU,CAACsC,MAAM,CAAC,CAAC;MAAA;IAAC,CAC1C,CAAC,EACF/C,KAAA,CAACvB,UAAU;MAACiE,KAAK,EAAE7B,MAAM,CAACmC,UAAW;MAAAJ,QAAA,GACrC5C,KAAA,CAACtB,IAAI;QAACgE,KAAK,EAAE7B,MAAM,CAACoC,UAAW;QAAAL,QAAA,GAAC,kCACA,EAAC,CAAA9B,WAAW,qBAAAR,iBAAA,GAAXQ,WAAW,CAAEkB,IAAI,sBAAAzB,qBAAA,GAAjBD,iBAAA,CAAmB4C,YAAY,sBAAA1C,sBAAA,GAA/BD,qBAAA,CAAkC,CAAC,CAAC,qBAApCC,sBAAA,CAAsC2C,KAAK,KAAI,EAAE;MAAA,CACpE,CAAC,EACXrD,IAAA,CAACjB,SAAS;QACNuE,YAAY,EAAE,SAAAA,aAACC,IAAI,EAAK;UACpB7B,MAAM,CAAC6B,IAAI,CAAC;UACZzB,WAAW,CAAC,EAAE,CAAC;QACnB,CAAE;QAEF0B,cAAc,EAAE,CAAE;QAClBC,SAAS;QACTC,WAAW,EAAE;UAAEC,eAAe,EAAE,OAAO;UAAEC,KAAK,EAAE,EAAE;UAAEC,MAAM,EAAE,EAAE;UAAEC,YAAY,EAAE,CAAC;UAAEC,SAAS,EAAE,CAAC;UAAEC,MAAM,EAAE,CAAC;UAAEC,QAAQ,EAAE,EAAE;UAAEC,UAAU,EAAE,QAAQ;UAAEC,SAAS,EAAE,EAAE;UAACC,KAAK,EAAC;QAAO,CAAE;QAC3KC,SAAS,EAAC;MAAQ,CACrB,CAAC,EACD,CAAAxC,QAAQ,oBAARA,QAAQ,CAAEI,MAAM,IAAG,CAAC,IACjBjC,IAAA,CAACpB,IAAI;QAACgE,KAAK,EAAE7B,MAAM,CAACuD,SAAU;QAAAxB,QAAA,EACzBjB;MAAQ,CACP,CACT,EACD7B,IAAA,CAACnB,gBAAgB;QAAC0F,OAAO,EAAE,SAAAA,QAAA;UAAA,OAAI5B,oBAAoB,CAAC,CAAC;QAAA,CAAC;QAAAG,QAAA,EAC1D9C,IAAA,CAACpB,IAAI;UAACgE,KAAK,EAAE7B,MAAM,CAACyD,aAAc;UAAA1B,QAAA,EAAE;QAA0B,CAAO;MAAC,CACtD,CAAC;IAAA,CACL,CAAC,EACb9C,IAAA,CAAClB,IAAI;MAAC8D,KAAK,EAAE7B,MAAM,CAAC0D,aAAc;MAAA3B,QAAA,EAC9B9C,IAAA,CAACb,YAAY;QACT0B,KAAK,EAAEA,KAAM;QACb6D,UAAU,EAAE,SAAAA,WAAA;UAAA,OAAM3C,OAAO,CAAC,CAAC;QAAA,CAAC;QAC5B4C,WAAW,EAAEpF,OAAO,CAACqF,OAAQ;QAC7BC,WAAW,EAAE9D,MAAM,CAAC+D,UAAW;QAC/BC,gBAAgB,EAAEhE,MAAM,CAACiE;MAAY,CACxC;IAAC,CACA,CAAC;EAAA,CACL,CAAC;AAEf,CAAC;AAED,eAAe7E,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}